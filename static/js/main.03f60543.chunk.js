(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){e.exports={container:"Users_container__Ab32D",user_profile:"Users_user_profile__3TOVQ",user_name:"Users_user_name__2EqMn",user_avatar:"Users_user_avatar__1He4Q",user_link:"Users_user_link__2SkEQ",right_side:"Users_right_side__3ws8O",button:"Users_button__2IIyP",remove:"Users_remove__11up6",add:"Users_add__1lc0Q",send__message:"Users_send__message__BO04P",left_side:"Users_left_side__3683J",elem:"Users_elem__1mchy",active_elem:"Users_active_elem__38asS",user_search__input:"Users_user_search__input__2aeHn",user__search_block:"Users_user__search_block__2KLyQ",modal__block:"Users_modal__block__2FMP0",modal__block_content:"Users_modal__block_content__oGkhR",active:"Users_active__1lZBV",modal__block_newMessage:"Users_modal__block_newMessage__3aesZ",modal__block_textarea:"Users_modal__block_textarea__1uH3-",modal__block_middle:"Users_modal__block_middle__3hqHY",modal__block_button:"Users_modal__block_button__RDTb_",modal__block_userData:"Users_modal__block_userData__33oTN"}},13:function(e,t,a){e.exports={profile__pic:"Profile-head_profile__pic__3Ua-l",profile__pic_changer:"Profile-head_profile__pic_changer__3DuQA",profile__pic_changer_pic:"Profile-head_profile__pic_changer_pic__wHFQc",profile_info:"Profile-head_profile_info__2PR8y",avatar:"Profile-head_avatar__19DVz",profile_text:"Profile-head_profile_text__3swTc",status:"Profile-head_status__395ak",upload_photo:"Profile-head_upload_photo__1RFom",hidden:"Profile-head_hidden__31yCy",green:"Profile-head_green__3mwPq",button:"Profile-head_button__3gp5u",remove_friend:"Profile-head_remove_friend__2Z3dp",add_friend:"Profile-head_add_friend__3Z_a7",send_message:"Profile-head_send_message__14cuZ"}},14:function(e,t,a){e.exports={container:"Messages_container__1ly3v",contacts:"Messages_contacts__3nMF8",items_list:"Messages_items_list__2k_26",item:"Messages_item__o5vQu",active:"Messages_active__3KA4z",unreadMessages:"Messages_unreadMessages__1ZW1S",dialogContainer:"Messages_dialogContainer__26PQW",screen:"Messages_screen__1v4Cy",person:"Messages_person__KkHat",ava:"Messages_ava__2wA09",message:"Messages_message__3wg6d",content:"Messages_content__LWMF-",answer:"Messages_answer__1SZpL",name:"Messages_name__1ppF6",area:"Messages_area__heOGk",button:"Messages_button__w1vfq"}},20:function(e,t,a){e.exports={postswall:"PostsWall_postswall__DvihT",add_new_post:"PostsWall_add_new_post__3fkH8",button:"PostsWall_button__nZwTQ",posts:"PostsWall_posts__fjTyI",post:"PostsWall_post__3scAa",name:"PostsWall_name__Fbn0r",delete:"PostsWall_delete__1kRHD",edit:"PostsWall_edit__2clwa",likes_container:"PostsWall_likes_container__2fHvk",likes:"PostsWall_likes__SLJwD",liked:"PostsWall_liked__27Tqa",user_link:"PostsWall_user_link__2YCAG",not__autorized_block:"PostsWall_not__autorized_block__FhXmf",image:"PostsWall_image__kVCjL"}},204:function(e,t){e.exports="data:image/png;base64,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"},207:function(e,t,a){e.exports=a.p+"static/media/upload_prof_pic.cdbabb81.svg"},208:function(e,t,a){e.exports=a.p+"static/media/upload_prof_pic_upload.8dc79ec1.svg"},209:function(e,t,a){e.exports=a.p+"static/media/authorized_Sam.a944f518.jpg"},21:function(e,t,a){"use strict";a.d(t,"j",function(){return n}),a.d(t,"a",function(){return r}),a.d(t,"c",function(){return s}),a.d(t,"k",function(){return c}),a.d(t,"b",function(){return o}),a.d(t,"d",function(){return l}),a.d(t,"f",function(){return i}),a.d(t,"i",function(){return u}),a.d(t,"g",function(){return m}),a.d(t,"e",function(){return d}),a.d(t,"h",function(){return _});var n="TYPE_ON_WALL_TEXTAREA",r="ADD_POST",s="EDIT_POST",c="UPDATE_LIKES",o="DELETE_POST",l="SEND_MESSAGE",i="SET_CONVERSATION_ID",u="TYPE_ON_PRIMARY_MESSAGE_TEXTAREA",m="SET_TO_NULL_UNREAD_COUNTER",d="SET_CONTACTS",_="SET_USER_MESSAGES"},22:function(e,t,a){e.exports={header:"Header_header__NANXn",logo:"Header_logo__1yFvT",auth__block:"Header_auth__block__2fVT1",auth__block_input:"Header_auth__block_input__1niTR",auth__block_label:"Header_auth__block_label__1mSJx",button:"Header_button__15dY1",welcome:"Header_welcome__1H_fd",welcome__name:"Header_welcome__name__2gcvi",auth__block_error:"Header_auth__block_error__3CyGE",auth__block_notice:"Header_auth__block_notice__ZZhSe",register__block:"Header_register__block__h1JeZ",register__link:"Header_register__link__2CVq9"}},225:function(e,t,a){e.exports=a(455)},233:function(e,t,a){},235:function(e,t,a){},35:function(e,t,a){"use strict";(function(e){a.d(t,"e",function(){return l}),a.d(t,"d",function(){return i}),a.d(t,"a",function(){return u}),a.d(t,"b",function(){return m}),a.d(t,"c",function(){return d});var n=a(12),r=a(5),s=a(21),c=a(9),o={updated:!1,textAreaState:"",editData:{status:!1,index:0,postId:0},userPosts:[{id:1,message:"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Unde, aperiam maiores odio vero molestias aspernatur eum temporibus magnam natus ducimus repudiandae adipisci necessitatibus quibusdam obcaecati voluptatibus facere neque tempora nulla.",likes:[9,2,3,1],sent:1672259123420},{id:2,message:"This is the second post!",likes:[],sent:1672259215520},{id:3,message:"Props is props. message named!",likes:[2,3],sent:1672259164367},{id:4,message:"4th post is here.",likes:[],sent:1672259713457},{id:5,message:"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Unde, aperiam maiores odio vero molestias aspernatur eum temporibus magnam natus ducimus repudiandae adipisci necessitatibus quibusdam obcaecati voluptatibus facere neque tempora nulla.",likes:[1,2,32,323,23],sent:1672251643744},{id:"someRandomId",message:"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Unde, aperiam maiores odio vero molestias aspernatur eum temporibus magnam natus ducimus repudiandae adipisci necessitatibus quibusdam obcaecati voluptatibus facere neque tempora nulla.",likes:[1],sent:1672259719420}]},l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case s.j:return Object(r.a)({},t,{textAreaState:a.value});case"UPDATE_USER_POSTS_STATE":var c=JSON.stringify(a.posts);return c=(c=JSON.parse(c)).map(function(e){var t=new Date(e.updated);return e.updated=t.getTime(),e.likes=JSON.parse(e.likes),e}),Object(r.a)({},t,{userPosts:c});case"ADD_POST":var l={id:crypto.randomUUID()," message":t.textAreaState,likes:[],sent:(new Date).getTime()},i=e.structuredClone(t.userPosts),u=Object(r.a)({},t.editData);return t.editData.status?t.textAreaState.trim()&&(i[u.index].message=t.textAreaState):t.textAreaState.trim()&&i.unshift(l),Object(r.a)({},t,{userPosts:i,textAreaState:"",editData:Object(r.a)({},t.editData,{status:!1})});case s.c:var m=e.structuredClone(t.userPosts)[a.index].message,d=Object(r.a)({},t.editData);return d.status=!0,d.index=a.index,d.postId=a.postId,Object(r.a)({},t,{textAreaState:m,editData:d});case s.k:var _=e.structuredClone(t.userPosts),p=Object(n.a)(_[a.index].likes),f=a.id;if(p.includes(f)){var g=p.indexOf(f);p.splice(g,1)}else p.push(f);return _.likes=p,Object(r.a)({},t,{userPosts:_});case s.b:var E=e.structuredClone(t.userPosts);return E.splice(a.index,1),Object(r.a)({},t,{userPosts:E});default:return t}},i=function(e){return{type:s.j,value:e}},u=function(e){return{type:s.b,index:e}},m=function(e,t){return{type:s.c,postId:t,index:e}},d=function(e){return function(t){c.a.getUserPosts(e).then(function(e){t({type:"UPDATE_USER_POSTS_STATE",posts:e.data.posts})})}}}).call(this,a(43))},451:function(e,t,a){},453:function(e,t,a){},455:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(203),c=a.n(s),o=(a(233),a(235),a(22)),l=a.n(o),i=a(204),u=a.n(i),m=a(16),d=a(3),_=a(6);var p=function(e){var t=e.setPass,a=e.setLogin,n=e.authorizeMe,s=e.login,c=e.pass,o=e.errorMessage;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:l.a.auth__block},r.a.createElement("form",{action:"submit",onSubmit:function(e){e.preventDefault(),n(s,c)}},r.a.createElement("label",{className:l.a.auth__block_label,htmlFor:"login"},"Login:"),r.a.createElement("input",{className:l.a.auth__block_input,placeholder:"Login",type:"text",id:"login",onChange:function(e){return a(e.target.value)},value:s,required:!0}),r.a.createElement("label",{className:l.a.auth__block_label,htmlFor:"pass"},"Password:"),r.a.createElement("input",{className:l.a.auth__block_input,placeholder:"Password",type:"text",id:"pass",onChange:function(e){return t(e.target.value)},value:c,required:!0}),r.a.createElement("button",{className:l.a.button,type:"submit"},"Log in")),r.a.createElement("div",{className:l.a.auth__block_notice},o&&r.a.createElement("span",{className:l.a.auth__block_error},o)),r.a.createElement("div",{className:l.a.register__link},r.a.createElement(m.b,{to:"/register"},"Register"))))};var f=function(e){var t=e.logout,a=e.name;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:l.a.welcome},"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c,  ",r.a.createElement("span",{className:l.a.welcome__name}," ",a,"! "),r.a.createElement("button",{className:l.a.button,onClick:t,path:"/"},"Log out")))},g=a(9),E=a(37),b=a(55);var h=function(){var e=Object(n.useState)(""),t=Object(d.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)(""),o=Object(d.a)(c,2),l=o[0],i=o[1],u=new E.a,m=Object(_.c)(function(e){return e.authReducer}),h=Object(_.b)(),v=Object(_.c)(function(e){return e.authReducer.authorized}),O=u.get("cookie localhost");return Object(n.useEffect)(function(){if(Object(b.b)(O))return u.remove("cookie localhost"),h({type:"SET_AUTHORIZED",authorized:!1}),h({type:"REMOVE_USER_DATA"}),r.a.createElement("redirect",{to:"/"});g.a.authentification(O,Object(b.a)(O).id).then(function(e){var t=Object(b.a)(O).id;h({type:"SET_USER_INFO_AFTER_LOGIN",userData:e.data.userInfo,id:t}),h({type:"SET_AUTHORIZED",authorized:!0})})},[]),r.a.createElement(r.a.Fragment,null,v?r.a.createElement(f,{logout:function(){u.remove("cookie localhost"),h({type:"SET_AUTHORIZED",authorized:!1})},name:m.userData.name}):r.a.createElement(p,{errorMessage:m.errorMessage,state:m,setLogin:s,setPass:i,login:a,pass:l,authorizeMe:function(e,t){g.a.authorizedMe(e,t).then(function(e){200==e.status&&(u.set("cookie localhost",e.data.token,{}),h({type:"SET_USER_INFO_AFTER_LOGIN",userData:e.data.userInfo,id:e.data.userInfo.id}),h({type:"SET_AUTHORIZED",authorized:!0,errorMessage:null}))}).catch(function(e){return"ERR_NETWORK"==e.code?h({type:"SET_AUTHORIZED",authorized:!1,errorMessage:"some problems with network"}):400==e.response.status?h({type:"SET_AUTHORIZED",authorized:!1,errorMessage:"wrong password or login"}):void 0})}}))},v=function(){return r.a.createElement("header",{className:l.a.header},r.a.createElement("div",{className:l.a.logo},r.a.createElement(m.b,{to:"/"},r.a.createElement("img",{src:u.a,alt:"logo"}))),r.a.createElement(h,null))},O=a(56),S=a.n(O),N=function(){var e=Object(_.c)(function(e){return e.authReducer.authorized}),t=Object(_.c)(function(e){return e.messageReducer}).contactsData.map(function(e){return e.unreadCounter});t=t.reduce(function(e,t){return e+t});var a=function(e){return e.isActive?"".concat(S.a.active," ").concat(S.a.item):S.a.item};return r.a.createElement(r.a.Fragment,null,e&&r.a.createElement("nav",{className:S.a.nav},r.a.createElement("div",{className:S.a.item_list},e?r.a.createElement(r.a.Fragment,null,r.a.createElement(m.c,{to:"/",className:a},"Posts Wall"),r.a.createElement(m.c,{to:"/messages",className:a},"Messages ",t>0&&r.a.createElement("span",{className:S.a.unreadMessages},t)),r.a.createElement(m.c,{to:"/users_list",className:a},"Users"),r.a.createElement(m.c,{to:"/friends",className:a},"Friends"),r.a.createElement(m.c,{to:"/music",className:a},"Music"),r.a.createElement(m.c,{to:"/settings",className:a},"Settings")):"")))},A=a(20),U=a.n(A),j=function(e){var t=e.state,a=e.posts,n=e.ownerId,s=e.userId,c=e.typeTextArea,o=e.dispatch,l=e.usersAPI;function i(e,a,n){n.trim()&&(t.editData.status?(o({type:"ADD_POST"}),l.updatepost({type:"editPost",postId:t.editData.postId,message:t.textAreaState}).then(function(e){return console.log(e)})):(o({type:"ADD_POST"}),l.sendUserWallPost(e,a,n).then(function(e){})))}return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:U.a.postswall},r.a.createElement("div",{className:U.a.add_new_post},r.a.createElement("textarea",{cols:"80",rows:"1",placeholder:"New post about..",onChange:c,onKeyDown:function(e){return"Enter"===e.key&&e.ctrlKey?i(n,s||n,t.textAreaState):""},value:t.textAreaState,tabIndex:"13"}),r.a.createElement("button",{onClick:function(){i(n,s||n,t.textAreaState)},className:U.a.button},"Post it!"))),r.a.createElement("div",{className:U.a.posts},a))},k=a(457),T=a(13),I=a.n(T),D=a(207),P=a.n(D),w=a(208),y=a.n(w),R=function(){var e=Object(n.useRef)(),t=Object(n.useRef)(),a=Object(_.c)(function(e){return e.authReducer.userData.status}),s=Object(_.c)(function(e){return e.authReducer.id}),c=Object(n.useState)(!1),o=Object(d.a)(c,2),l=o[0],i=o[1],u=Object(n.useState)(!1),m=Object(d.a)(u,2),p=m[0],f=m[1],b=Object(_.b)(),h=Object(_.c)(function(e){return e.authReducer.userData}),v=(new E.a).get("cookie localhost");function O(e){e.preventDefault();var t=new FormData;t.append("file",p),t.append("id",s),function(e){k.a.post("http://127.0.0.1:3005/upload?type=profile_background",e).then(function(e){b({type:"USER_PROFILE_PIC_HANDLER",profilePic:e.data.filePath})})}(t),f(!1)}function S(e){e.preventDefault();var t=new FormData;t.append("file",l),t.append("id",s),function(e){k.a.post("http://127.0.0.1:3005/upload?type=photo",e).then(function(e){b({type:"USER_PHOTO_SETTINGS_HANDLER",photo:e.data.filePath})})}(t),i(!1)}return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:I.a.profile__pic},r.a.createElement("img",{src:h.profilePic||"https://cdn.huckletree.com/web-uploads/2018/10/23094022/OS-Blog-Header-32.png",alt:"",srcset:""}),p?r.a.createElement("div",{onClick:function(e){return O(e)},className:"".concat(I.a.profile__pic_changer," ").concat(I.a.green)},r.a.createElement("img",{className:I.a.profile__pic_changer_pic,src:P.a,alt:""})):r.a.createElement("div",{onClick:function(){return t.current.click()},className:I.a.profile__pic_changer},r.a.createElement("img",{className:I.a.profile__pic_changer_pic,src:y.a,alt:""})),r.a.createElement("input",{type:"file",className:I.a.hidden,accept:"image/*, .png, .jpg, .jpeg",onChange:function(e){e.preventDefault(),f(e.target.files[0])},ref:t})),r.a.createElement("div",{className:I.a.profile_info},r.a.createElement("div",{className:I.a.avatar},r.a.createElement("img",{src:h.photo||"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Circle-icons-profile.svg/200px-Circle-icons-profile.svg.png",alt:h.name,height:"200"}),l?r.a.createElement("div",{className:"".concat(I.a.upload_photo," ").concat(I.a.green),onClick:function(e){return S(e)}},"Upload on server"):r.a.createElement("div",{className:I.a.upload_photo,onClick:function(){return e.current.click()}},"Choose photo"),r.a.createElement("input",{type:"file",className:I.a.hidden,accept:"image/*, .png, .jpg, .jpeg",onChange:function(e){e.preventDefault(),i(e.target.files[0])},ref:e})),r.a.createElement("div",{className:I.a.profile_text},r.a.createElement("h2",{className:I.a.name},h.name),r.a.createElement("div",null,r.a.createElement("input",{className:I.a.status,type:"text",onBlur:function(){g.a.updateUsersStatus(v,s,a).then(function(e){return console.log(e)})},onChange:function(e){return b({type:"USER_STATUS_TEXT_HANDLER",statusText:e.target.value})},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0442\u0430\u0442\u0443\u0441..",value:a})),r.a.createElement("div",{className:I.a.profile_content},r.a.createElement("p",null,r.a.createElement("i",null,"Contact email: ",h.email)),r.a.createElement("p",null,"City: ",h.info.city),r.a.createElement("p",null,"Gender: ",h.info.gender),r.a.createElement("p",null,"Age: ",h.info.age)))))},C=a(35),x=function(e){var t=e.likes.length,a=Object(n.useState)(e.likes.includes(e.ownerId)),s=Object(d.a)(a,2),c=s[0],o=s[1];return r.a.createElement("span",{className:U.a.likes_container},r.a.createElement("i",{className:c?U.a.likes+" "+U.a.liked:U.a.likes,onClick:function(){o(!c);var t=e.likes;if(t.includes(e.ownerId)){var a=t.indexOf(e.ownerId);t.splice(a,1)}else t.push(e.ownerId);console.log(t),g.a.updatepost({type:"updateLikes",postId:e.postId,likes:t}).then(function(e){return console.log(e)})}}),t<=0?"":t," ",t<=0?"No one like it":1==t?"Like it!":"Likes it!")},M=function(e){var t=function(){g.a.updatepost({postId:e.postId,type:"deletePost"}).then(function(e){return console.log(e)}),e.dispatch(Object(C.a)(e.index))};function a(){e.dispatch(Object(C.b)(e.index,e.postId))}var n=new Date(e.sent),s=n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),c=n.toLocaleDateString();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:U.a.post},e.homeLander?e.fromId==e.ownerId?r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{className:U.a.edit,onClick:a}),r.a.createElement("i",{className:U.a.delete,onClick:t})):r.a.createElement("i",{className:U.a.delete,onClick:t}):e.fromId==e.ownerId?r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{className:U.a.edit,onClick:a}),r.a.createElement("i",{className:U.a.delete,onClick:t})):"",r.a.createElement("p",{className:U.a.name},r.a.createElement(m.b,{className:U.a.user_link,to:"/user/".concat(e.fromId)},e.fromName),r.a.createElement("span",null,c," at ",s)),r.a.createElement("pre",null,e.text),r.a.createElement(x,{dispatch:e.dispatch,likes:e.likes,index:e.index,postId:e.postId,ownerId:e.ownerId})))},F=a(209),L=a.n(F);var H=function(){var e=Object(_.c)(function(e){return e.authReducer.authorized}),t=Object(_.c)(function(e){return e.authReducer.id}),a=Object(_.c)(function(e){return e.usersReducer.currentProfilePageUserInfo.id}),s=Object(_.c)(function(e){return e.wallReducer}),c=Object(_.b)();Object(n.useEffect)(function(){e&&c(Object(C.c)(t))},[JSON.stringify(s.userPosts),e]);var o=s.userPosts.map(function(e,a){return r.a.createElement(M,{homeLander:!0,fromName:e.name,fromId:e.from_id,ownerId:t,message:s.textAreaState,postId:e.id,key:crypto.randomUUID(),likes:e.likes,text:e.message,index:a,dispatch:c,sent:e.updated})});return r.a.createElement(r.a.Fragment,null,e?r.a.createElement(r.a.Fragment,null,r.a.createElement(R,null),r.a.createElement(j,{state:s,typeTextArea:function(e){return c(Object(C.d)(e.target.value))},ownerId:t,posts:o,userId:a,dispatch:c,usersAPI:g.a})):null==e?null:r.a.createElement("div",{className:U.a.not__autorized_block},r.a.createElement("img",{className:U.a.image,src:L.a,alt:"Unauthorezid Sam"}),r.a.createElement("p",null,"You are not authorized.")))},G=a(12),z=a(14),W=a.n(z),B=function(e){var t=e.id,a=e.name,n=e.unreadCounter;return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.c,{key:crypto.randomUUID(),to:"/messages/".concat(t),className:function(e){return e.isActive?"".concat(W.a.active," ").concat(W.a.item):W.a.item}},a,n>0&&r.a.createElement("span",{className:W.a.unreadMessages},n)))},J=function(e){var t=Object(_.b)(),a=Object(_.c)(function(e){return e.authReducer.id});Object(n.useEffect)(function(){g.a.getDialogContacts(a).then(function(e){if(console.log(e),"Empty array"!==e.data){var n=Object(G.a)(e.data);n.map(function(e){return e.contragent_id==a&&(e.contragent_id=e.from_id),e}),t({type:"SET_CONTACTS",arr:n})}})},[a]);var s=e.state.contactsData.map(function(t){return r.a.createElement(B,{dispatch:e.dispatch,key:crypto.randomUUID(),id:t.id,name:t.name,unreadCounter:t.unreadCounter})});return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:W.a.contacts},r.a.createElement("ul",{className:W.a.items_list},s)))},Q=a(1),q=function(e){var t=e.text,a=e.name,n=e.answer,s=e.sent,c=new Date(+s);s=c.toLocaleTimeString();return r.a.createElement(r.a.Fragment,null,n?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"".concat(W.a.content," ").concat(W.a.answer)},r.a.createElement("div",{className:W.a.person},r.a.createElement("div",{className:W.a.ava},r.a.createElement("img",{src:"https://cdn1.iconfinder.com/data/icons/user-pictures/100/male3-32.png",alt:""})),r.a.createElement("div",{className:W.a.name},"Me")),r.a.createElement("div",{className:W.a.message},r.a.createElement("span",null,s),t))):n?void 0:r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:W.a.content},r.a.createElement("div",{className:W.a.person},r.a.createElement("div",{className:W.a.ava},r.a.createElement("img",{src:"https://cdn1.iconfinder.com/data/icons/user-pictures/100/male3-32.png",alt:""})),r.a.createElement("div",{className:W.a.name},a)),r.a.createElement("div",{className:W.a.message},r.a.createElement("span",null,s),t))))},K=a(223),V=a(69),Z=function(e){var t=e.state,a=e.dispatch,s=Object(_.c)(function(e){return e.authReducer.id}),c=Object(_.c)(function(e){return e.messageReducer.contactsMsg.length}),o=Object(Q.n)(),l=function(e,n){var r=t.contactsData.filter(function(e){return e.id==n})[0].currentMessageText;console.log(r),r&&(k.a.post("http://127.0.0.1:3005/messages/post",{from_id:e,to_id:n,message:r}).then(function(e){return console.log(e)}),a(Object(V.b)()))};Object(n.useEffect)(function(){o["*"]&&g.a.getDialogMessages(s,o["*"]).then(function(e){console.log("dialogs >>> ",e),a({type:"SET_USER_MESSAGES",payload:e.data,ownerId:s})}),console.log(o["*"]),a(Object(V.c)(o["*"])),a({type:"SET_TO_NULL_UNREAD_COUNTER",userId:o["*"]})},[o["*"],c]);var i=Object.assign([],t.contactsMsg).filter(function(e){return e.conversation==t.activeDialogId}).map(function(e){return r.a.createElement(q,{key:crypto.randomUUID(),text:e.text,conversation:e.conversation,name:e.name,answer:e.answer,sent:e.sent})});return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:W.a.screen},r.a.createElement(K.a,{className:W.a.dialogContainer},i),r.a.createElement("div",{className:W.a.area},o["*"]?r.a.createElement(r.a.Fragment,null,r.a.createElement("textarea",{placeholder:"Type your message here...",onChange:function(e){return a(Object(V.d)(e.target.value))},value:t.contactsData[t.currentConversationIndex].currentMessageText,onKeyDown:function(e){return"Enter"===e.key&&e.ctrlKey?l(s,o["*"]):""}}),r.a.createElement("button",{className:W.a.button,onClick:function(){return l(s,o["*"])}},"Send")):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("p",null,"\u0412\u044b\u0431\u0435\u0440\u0435\u0442\u0435 \u0434\u0438\u0430\u043b\u043e\u0433\u043e\u0432\u043e\u0435 \u043e\u043a\u043d\u043e!"))))))},Y=function(){var e=Object(_.c)(function(e){return e.messageReducer}),t=Object(_.b)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:W.a.title},r.a.createElement("h2",null,"Messages")),r.a.createElement("div",{className:W.a.container},r.a.createElement(J,{state:e,dispatch:t}),r.a.createElement(Z,{state:e,dispatch:t})))},X=a(5),$={isFetching:!1,currentUsersPage:1,usersPerList:5,totalUsersCount:0,totalPages:0,users:[],userFriendlist:[],currentProfilePageUserInfo:{profilePic:"",status:"",fullName:"",info:{},contacts:{},photo:"",aboutMe:"",id:"",userWallPosts:[]}};var ee=function(e,t){return function(a,n){g.a.getUsers(e,n().usersReducer.currentUsersPage,n().usersReducer.usersPerList,t).then(function(e){a({type:"SET_USERS",users:e.data.users,totalUsersCount:e.data.totalUsers}),a({type:"SET_USER_FRIENDLIST",friendList:e.data.friends})})}},te={id:null,authorized:null,errorMessage:null,userData:{name:"",email:"",info:{age:"",gender:"",city:""},photo:"",status:"",profilePic:""}},ae=a(458),ne=a(222),re=Object(ae.b)({wallReducer:C.e,messageReducer:V.a,usersReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER_WALL_POSTS":var a=Object(X.a)({},e.currentProfilePageUserInfo);return a.userWallPosts=t.posts,a.userWallPosts=a.userWallPosts.map(function(e){return e.likes=JSON.parse(e.likes),e}),Object(X.a)({},e,{currentProfilePageUserInfo:a});case"REMOVE_USER_DATA":case"SET_USER_FRIENDLIST":return Object(X.a)({},e,{userFriendlist:t.friendList});case"ADD_REMOVE_USER":var n=Object(G.a)(e.users);return n[t.i].followed=!n[t.i].followed,Object(X.a)({},e,{users:n});case"SET_CURRENT_PROFILE_DATA":var r=Object(X.a)({},e.currentProfilePageUserInfo);return r.fullName=t.fullName||r.fullName,r.info=JSON.parse(t.info)||r.info,r.photo=t.photo||r.photo,r.status=t.status||r.status,r.profilePic=t.profilePic||r.profilePic,Object(X.a)({},e,{currentProfilePageUserInfo:r});case"SET_PAGINATION_PAGE":return Object(X.a)({},e,{currentUsersPage:t.page,users:t.users});case"SET_CURRENT_PROFILE_PAGE_USER_ID":var s=Object(X.a)({},e.currentProfilePageUserInfo);return s.id=t.id,Object(X.a)({},e,{currentProfilePageUserInfo:s});case"SET_USERS":var c=Math.ceil((t.totalUsersCount||e.totalUsersCount)/e.usersPerList);return Object(X.a)({},e,{users:Object(G.a)(t.users),totalUsersCount:t.totalUsersCount||e.totalUsersCount,totalPages:c,currentUsersPage:t.page||e.currentUsersPage});case"LOAD_MORE_USERS":var o=e.currentProfilePageUserInfo;return o+=1,Object(X.a)({},e,{currentProfilePageUserInfo:o,users:[].concat(Object(G.a)(e.users),Object(G.a)(t.users))});default:return e}},authReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_STATUS_TEXT_HANDLER":return Object(X.a)({},e,{userData:Object(X.a)({},e.userData,{status:t.statusText})});case"USER_NAME_SETTINGS_HANDLER":return Object(X.a)({},e,{userData:Object(X.a)({},e.userData,{name:t.name})});case"USER_EMAIL_SETTINGS_HANDLER":return Object(X.a)({},e,{userData:Object(X.a)({},e.userData,{email:t.email})});case"USER_PHOTO_SETTINGS_HANDLER":return console.log("photo >>> ",t),Object(X.a)({},e,{userData:Object(X.a)({},e.userData,{photo:t.photo})});case"USER_PROFILE_PIC_HANDLER":return console.log("profilePic >>> ",t),Object(X.a)({},e,{userData:Object(X.a)({},e.userData,{profilePic:t.profilePic})});case"USER_GENDER_SETTINGS_HANDLER":return Object(X.a)({},e,{userData:Object(X.a)({},e.userData,{info:Object(X.a)({},e.userData.info,{gender:t.gender})})});case"USER_AGE_SETTINGS_HANDLER":return Object(X.a)({},e,{userData:Object(X.a)({},e.userData,{info:Object(X.a)({},e.userData.info,{age:t.age})})});case"USER_CITY_SETTINGS_HANDLER":return Object(X.a)({},e,{userData:Object(X.a)({},e.userData,{info:Object(X.a)({},e.userData.info,{city:t.city})})});case"SET_USER_INFO_AFTER_LOGIN":console.log(t.userData);var a=Object(X.a)({},t.userData);return a.info?a.info=JSON.parse(a.info):a.info={age:"",gender:"",city:""},console.log("userDataCopy >> ",t.userData),Object(X.a)({},e,{authorized:!0,userData:Object(X.a)({},a),id:t.id});case"SET_AUTHORIZED":return Object(X.a)({},e,{authorized:t.authorized,errorMessage:t.errorMessage});case"SET_LOGIN":return Object(X.a)({},e,{login:t.login});case"SET_PASS":return Object(X.a)({},e,{pass:t.pass});default:return e}}}),se=Object(ae.c)(re,Object(ae.a)(ne.a)),ce=a(10),oe=a.n(ce);var le=function(e){var t=e.users,a=e.loadMoreUsers,n=e.pages,s=e.userSearchValue,c=e.searchUserInputHandler;return r.a.createElement("div",{className:oe.a.container},r.a.createElement("div",{className:oe.a.user__search_block},r.a.createElement("label",{htmlFor:"user_search-input"},"Find user:"),r.a.createElement("input",{onChange:c,type:"text",className:oe.a.user_search__input,id:"user_search-form",placeholder:"Enter username...",value:s})),t,r.a.createElement("div",null,r.a.createElement("button",{onClick:a,className:"".concat(oe.a.button," ").concat(oe.a.remove)},"Load more...")),r.a.createElement("div",null,n))};var ie=function(e){var t=e.name,a=e.photo,s=e.id,c=e.dispatch,o=e.followUser,l=e.unfollowUser,i=e.userId,u=e.follow,_=e.setActive,p=Object(n.useState)(u),f=Object(d.a)(p,2),g=f[0],E=f[1],b=function(e){return c({type:"SET_CURRENT_PROFILE_PAGE_USER_ID",id:e})};return r.a.createElement("div",{key:crypto.randomUUID(),className:oe.a.user_profile},r.a.createElement("div",{className:oe.a.right_side},r.a.createElement("div",{className:oe.a.user_avatar},r.a.createElement(m.c,{onClick:b,to:"/user/".concat(s)}," ",r.a.createElement("img",{className:oe.a.user_avatar,src:a||"https://cdn4.iconfinder.com/data/icons/avatars-xmas-giveaway/128/indian_man_male_person-256.png",height:"36px",alt:"ava_".concat(t)})," ")),r.a.createElement("div",{className:oe.a.user_name},r.a.createElement(m.c,{className:oe.a.user_link,onClick:b,to:"/user/".concat(s)}," ",t," "))),r.a.createElement("div",{className:oe.a.left_side},r.a.createElement("button",{className:"".concat(oe.a.button," ").concat(oe.a.send__message),onClick:function(){return _(s,t,a||"https://cdn4.iconfinder.com/data/icons/avatars-xmas-giveaway/128/indian_man_male_person-256.png")}},"Send message"),r.a.createElement("button",{onClick:function(){g?l(i,s):o(i,s),E(!g)},className:"".concat(oe.a.button," ").concat(g?oe.a.add:oe.a.remove)},g?"Remove from friends":"Add to friends")))};a(451);function ue(){return r.a.createElement("div",{className:"user_profile"},r.a.createElement("div",{className:"right_side"},r.a.createElement("div",{className:"user_avatar"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"user_name"},r.a.createElement("div",{className:"short_line"}))),r.a.createElement("div",{className:"left_side"},r.a.createElement("div",{className:"long_line"}),r.a.createElement("div",{className:"long_line"}),r.a.createElement("div",{className:"long_line"})))}var me=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ue,{key:1}),r.a.createElement(ue,{key:2}),r.a.createElement(ue,{key:3}))},de=function(e,t){var a=[];if(t<7)for(var n=1;n<=t;n++)a.push(n);else if(e<=3)for(var r=1;r<=7;r++)a.push(r);else if(e>=t-3)for(var s=e-(6-(t-e));s<=t;s++)a.push(s);else if(e>3)for(var c=e-3;c<e+4;c++)a.push(c);return a};var _e=function(e){var t=e.setActive,a=e.isActive,n=e.children;return console.log(a),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:a?"".concat(oe.a.modal__block," ").concat(oe.a.active):oe.a.modal__block,onClick:function(){t(!1)}},r.a.createElement("div",{className:oe.a.modal__block_content,onClick:function(e){return e.stopPropagation()}},n)))};function pe(e){var t=e.modalData,a=e.setModalActive,s=e.isActive,c=Object(n.useState)(""),o=Object(d.a)(c,2),l=o[0],i=o[1],u=Object(n.useState)(!1),p=Object(d.a)(u,2),f=p[0],g=p[1],E=Object(_.c)(function(e){return e.authReducer.id});Object(n.useEffect)(function(){f&&setTimeout(function(){a(!1),setTimeout(function(){g(!f)},300)},700)},[f]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(_e,{isActive:s,setActive:a},f?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:oe.a.modal__block_newMessage},"Message sent!")):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:oe.a.modal__block_newMessage},"New message:"),r.a.createElement("div",{className:oe.a.modal__block_middle},r.a.createElement("div",{className:oe.a.modal__block_userData},r.a.createElement("img",{className:oe.a.user_avatar,src:t.photo||"https://cdn4.iconfinder.com/data/icons/avatars-xmas-giveaway/128/indian_man_male_person-256.png",height:"36px",alt:t.name,srcset:""}),r.a.createElement(m.b,{to:"/user/".concat(t.id)},t.name)),r.a.createElement("textarea",{className:oe.a.modal__block_textarea,cols:"30",rows:"20",onChange:function(e){return i(e.target.value)},value:l})),r.a.createElement("button",{className:"".concat(oe.a.button," ").concat(oe.a.remove," ").concat(oe.a.modal__block_button),onClick:function(){return function(e,t){l&&k.a.post("http://127.0.0.1:3005/messages/post",{from_id:e,to_id:t,message:l}).then(function(){i(""),g(!0)})}(E,t.id)}},"Send"))))}var fe=function(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)(!0),o=Object(d.a)(c,2),l=o[0],i=o[1],u=Object(n.useState)(""),m=Object(d.a)(u,2),p=m[0],f=m[1],b=Object(n.useState)(!1),h=Object(d.a)(b,2),v=h[0],O=h[1],S=Object(n.useState)({}),N=Object(d.a)(S,2),A=N[0],U=N[1],j=Object(_.c)(function(e){return e.usersReducer}),k=Object(_.b)(),T=Object(_.c)(function(e){return e.authReducer.id}),I=Object(_.c)(function(e){return e.authReducer.authorized}),D=(new E.a).get("cookie localhost");function P(e,t,a){O(!0),U(function(n){return{id:e,name:t,photo:a}}),console.log(A)}Object(n.useEffect)(function(){!I&&T||(k(ee(D,T)),i(!1))},[I]);var w=de(j.currentUsersPage,j.totalPages).map(function(e){return r.a.createElement(r.a.Fragment,null," ",r.a.createElement("span",{key:crypto.randomUUID(),onClick:function(){return t=e,void(p?(i(!0),g.a.getFilteredUsers(p,t).then(function(e){console.log(e),k({type:"SET_USERS",page:t,users:e.data.users,totalUsersCount:e.data.totalUsers}),i(!1)})):(i(!0),g.a.getUsers(D,t,j.usersPerList,T).then(function(e){console.log("pag res >> ",e),k({type:"SET_PAGINATION_PAGE",page:t,users:Object(G.a)(e.data.users)})}).then(function(){i(!1)})));var t},className:"".concat(oe.a.elem," ").concat(e==j.currentUsersPage?oe.a.active_elem:"")},e))});function y(e,t){console.log("followUser called"),g.a.postFollowUser(e,t).then(function(e){return console.log(e)})}function R(e,t){console.log("unfollowUser called"),g.a.deleteUnfollowUser(e,t).then(function(e){return console.log(e)})}var C=j.users.map(function(e){var t=!!j.userFriendlist&&j.userFriendlist.map(function(e){return e.id}).includes(e.id);return r.a.createElement(r.a.Fragment,null,r.a.createElement(ie,{key:crypto.randomUUID(),setActive:P,subscribe:a,setSubscribe:s,follow:t,unfollowUser:R,followUser:y,photo:e.photo,userId:T,name:e.name,id:e.id,dispatch:k}))});return r.a.createElement("div",null,r.a.createElement("h1",null,"USERS LIST"),r.a.createElement(pe,{isActive:v,modalData:A,setModalActive:O}),I?l?r.a.createElement(me,null):r.a.createElement(le,{userSearchValue:p,searchUserInputHandler:function(e){f(e.target.value),g.a.getFilteredUsers(e.target.value).then(function(e){k({type:"SET_USERS",users:e.data.users,totalUsersCount:e.data.totalUsers,page:1})})},users:C,loadMoreUsers:function(){i(!0),g.a.getUsers(D,j.currentUsersPage+1,j.usersPerList).then(function(e){k({type:"LOAD_MORE_USERS",users:Object(G.a)(e.data.users)})}).then(function(){i(!1)})},pages:w}):null)};var ge=function(e){var t=e.setActive,a=e.profilePic,s=e.status,c=e.photo,o=e.fullName,l=e.contacts,i=e.aboutMe,u=e.isFriend,m=e.ownerId,_=e.userId,p=e.followUser,f=e.unfollowUser,g=Object(n.useState)(!1),E=Object(d.a)(g,2),b=E[0],h=E[1];return Object(n.useEffect)(function(){h(u)},[u]),console.log("render",b,u),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:I.a.profile__pic},r.a.createElement("img",{src:a||"https://cdn.huckletree.com/web-uploads/2018/10/23094022/OS-Blog-Header-32.png",alt:"",srcset:""})),r.a.createElement("div",{className:I.a.profile_info},r.a.createElement("div",{className:I.a.avatar},r.a.createElement("img",{src:c||"https://cdn4.iconfinder.com/data/icons/avatars-xmas-giveaway/128/indian_man_male_person-256.png",alt:"ava",height:"80"}),r.a.createElement("button",{className:"".concat(I.a.button," ").concat(I.a.send_message),onClick:function(){t(_,o,c)}},"Send Message"),r.a.createElement("button",{className:b?"".concat(I.a.button," ").concat(I.a.remove_friend):"".concat(I.a.button," ").concat(I.a.add_friend),onClick:function(){b?f(m,_):p(m,_),h(!b)}},b?"Remove from friend":"Add to friend")),r.a.createElement("div",{className:I.a.profile_text},r.a.createElement("h2",{className:I.a.name},o),r.a.createElement("p",null,"Status: ",s),r.a.createElement("div",{className:I.a.profile_content},r.a.createElement("p",null,"Age: ",i.age),r.a.createElement("p",null,"Gender: ",i.gender),r.a.createElement("p",null,"FB: ",l.facebook),r.a.createElement("p",null,"VK: ",l.vk),r.a.createElement("p",null,"Twitter: ",l.twitter),r.a.createElement("p",null,"GitHub: ",l.github),r.a.createElement("p",null,"City: ",i.city),r.a.createElement("p",null,"Edu: High grade")))))};var Ee=function(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)({}),o=Object(d.a)(c,2),l=o[0],i=o[1],u=Object(_.c)(function(e){return e.usersReducer.currentProfilePageUserInfo}),m=Object(_.c)(function(e){return e.usersReducer}),p=Object(_.c)(function(e){return e.wallReducer}),f=Object(_.c)(function(e){return e.authReducer.id}),b=(new E.a).get("cookie localhost"),h=Object(_.b)(),v=Object(Q.n)(),O=!1;m.userFriendlist&&m.userFriendlist.forEach(function(e){return O=e.id==v.userId}),Object(n.useEffect)(function(){h(ee(b,f)),g.a.getCurrentUser(v.userId).then(function(e){h({type:"SET_CURRENT_PROFILE_DATA",fullName:e.data.name,info:e.data.info,photo:e.data.photo,status:e.data.status,profilePic:e.data.profile_background}),h(Object(C.c)(v.userId))})},[v.userId,p.userPosts.length,O]);var S=p.userPosts.map(function(e,t){return r.a.createElement(M,{homeLander:!1,fromName:e.name,fromId:e.from_id,ownerId:f,message:p.textAreaState,postId:e.id,key:crypto.randomUUID(),likes:e.likes,text:e.message,index:t,dispatch:h,sent:e.updated})});return r.a.createElement(r.a.Fragment,null,r.a.createElement(pe,{isActive:a,modalData:l,setModalActive:s}),r.a.createElement(ge,{setActive:function(e,t,a){s(!0),i(function(n){return{id:e,name:t,photo:a}})},ownerId:+f,userId:+v.userId,followUser:function(e,t){console.log("followUser called"),g.a.postFollowUser(e,t).then(function(){return h(ee(b,f))})},unfollowUser:function(e,t){console.log("unfollowUser called"),g.a.deleteUnfollowUser(e,t).then(function(){return h(ee(b,f))})},isFriend:O,status:u.status,profilePic:u.profilePic,photo:u.photo,fullName:u.fullName,contacts:{facebook:"fb"},aboutMe:u.info}),r.a.createElement(j,{typeTextArea:function(e){return h(Object(C.d)(e.target.value))},ownerId:f,userId:v.userId,posts:S,dispatch:h,usersAPI:g.a,state:p}))};var be=function(e){var t=e.registerUser,a=Object(n.useState)(""),s=Object(d.a)(a,2),c=s[0],o=s[1],i=Object(n.useState)(""),u=Object(d.a)(i,2),m=u[0],_=u[1],p=Object(n.useState)(""),f=Object(d.a)(p,2),g=f[0],E=f[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:l.a.register__block},r.a.createElement("form",{action:"submit",onSubmit:function(e){e.preventDefault(),t(c,m,g)}},r.a.createElement("label",{htmlFor:"email"},"Email:"),r.a.createElement("input",{type:"text",id:"email",onChange:function(e){return E(e.target.value)},value:g}),r.a.createElement("label",{htmlFor:"login"},"Login:"),r.a.createElement("input",{type:"text",id:"login",onChange:function(e){return o(e.target.value)},value:c}),r.a.createElement("label",{htmlFor:"password"},"Password:"),r.a.createElement("input",{type:"text",id:"password",onChange:function(e){return _(e.target.value)},value:m}),r.a.createElement("button",{type:"submit"},"Register user"))))};var he=function(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),a=t[0],s=t[1];return r.a.createElement(r.a.Fragment,null,a?r.a.createElement("div",null,"Thanks for registration!"):r.a.createElement(be,{registerUser:function(e,t,a){k.a.post("http://127.0.0.1:3005/users/register",{login:e,password:t,email:a}).then(function(e){201==e.status&&s(!0),console.log(e.status)})}}))};var ve=function(e){var t=new E.a,a=Object(_.c)(function(e){return e.authReducer.authorized}),s=Object(_.c)(function(e){return e.authReducer.id}),c=Object(_.c)(function(e){return e.usersReducer}),o=Object(_.b)(),l=t.get("cookie localhost"),i=Object(n.useState)(!1),u=Object(d.a)(i,2),m=u[0],p=u[1],f=Object(n.useState)(!1),h=Object(d.a)(f,2),v=h[0],O=h[1],S=Object(n.useState)({}),N=Object(d.a)(S,2),A=N[0],U=N[1];function j(e,t,a){O(!0),U(function(n){return{id:e,name:t,photo:a}}),console.log(A)}function k(e,t){g.a.postFollowUser(e,t).then(function(e){return console.log(e)})}function T(e,t){g.a.deleteUnfollowUser(e,t)}Object(n.useEffect)(function(){console.log("rerender"),Object(b.b)(l)&&s||(s=Object(b.a)(l).id),o(ee(l,s))},[a,m]);var I=null;return c.userFriendlist&&(I=c.userFriendlist.map(function(e,t,a){var n=a.map(function(e){return e.id}).includes(e.id);return r.a.createElement(ie,{setActive:j,userId:s,unfollowUser:T,followUser:k,follow:n,key:e.id,name:e.name,id:e.id,photo:e.photo,upd:m,setUpd:p,dispatch:o})})),r.a.createElement("div",null,r.a.createElement("h1",null,"FRIENDS LIST"),r.a.createElement(pe,{isActive:v,modalData:A,setModalActive:O}),r.a.createElement(le,{users:I}))};function Oe(e){return r.a.createElement(r.a.Fragment,null)}a(453);function Se(e){var t=Object(_.b)(),a=Object(_.c)(function(e){return e.authReducer.id}),s=Object(_.c)(function(e){return e.authReducer.userData}),c=(new E.a).get("cookie localhost"),o=Object(n.useState)(""),l=Object(d.a)(o,2),i=l[0],u=l[1];return r.a.createElement("div",null,i&&r.a.createElement("p",{className:"success"},"Successfully updated!"),r.a.createElement("div",{className:"settings"},r.a.createElement("form",{className:"form",onSubmit:function(e){e.preventDefault(),g.a.updateProfileSettings(c,s,a).then(function(e){return u(e.status)})}},r.a.createElement("div",{className:"item"},r.a.createElement("label",{htmlFor:"name"},"Name: "),r.a.createElement("input",{type:"text",id:"name",onChange:function(e){return t({type:"USER_NAME_SETTINGS_HANDLER",name:e.target.value})},value:s.name,required:!0})),r.a.createElement("div",{className:"item"},r.a.createElement("label",{htmlFor:"email"},"Email: "),r.a.createElement("input",{type:"email",id:"email",onChange:function(e){return t({type:"USER_EMAIL_SETTINGS_HANDLER",email:e.target.value})},value:s.email,required:!0})),r.a.createElement("div",{className:"item"},r.a.createElement("label",{htmlFor:"gender"},"Gender: "),r.a.createElement("select",{name:"gender",id:"gender",onChange:function(e){return t({type:"USER_GENDER_SETTINGS_HANDLER",gender:e.target.value})},value:s.info.gender},r.a.createElement("option",{value:"Male"},"Male"),r.a.createElement("option",{value:"Female"},"Female"))),r.a.createElement("div",{className:"item"},r.a.createElement("label",{htmlFor:"age"},"Age: "),r.a.createElement("input",{type:"number",id:"age",onChange:function(e){return t({type:"USER_AGE_SETTINGS_HANDLER",age:e.target.value})},value:s.info.age})),r.a.createElement("div",{className:"item"},r.a.createElement("label",{htmlFor:"city"},"City: "),r.a.createElement("input",{type:"text",id:"city",onChange:function(e){return t({type:"USER_CITY_SETTINGS_HANDLER",city:e.target.value})},value:s.info.city})),r.a.createElement("button",{type:"submit"},"Save settings"))),r.a.createElement(Oe,null))}var Ne=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,{store:se},r.a.createElement(m.a,null,r.a.createElement(v,null),r.a.createElement("main",{className:"main"},r.a.createElement(N,null),r.a.createElement("div",{className:"content"},r.a.createElement(Q.c,null,r.a.createElement(Q.a,{path:"/",element:r.a.createElement(H,null)}),r.a.createElement(Q.a,{path:"/messages/*",element:r.a.createElement(Y,{store:se})}),r.a.createElement(Q.a,{path:"/users_list/*",element:r.a.createElement(fe,null)}),r.a.createElement(Q.a,{path:"/friends/",element:r.a.createElement(ve,null)}),r.a.createElement(Q.a,{path:"/user/:userId",element:r.a.createElement(Ee,null)}),r.a.createElement(Q.a,{path:"/register",element:r.a.createElement(he,null)}),r.a.createElement(Q.a,{path:"/settings",element:r.a.createElement(Se,null)})))))))},Ae=function(e){e&&e instanceof Function&&a.e(1).then(a.bind(null,456)).then(function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),s(e),c(e)})};c.a.createRoot(document.getElementById("root")).render(r.a.createElement(Ne,null)),Ae()},56:function(e,t,a){e.exports={nav:"Nav_nav__35eGO",item_list:"Nav_item_list__28zSQ",item:"Nav_item__1XmsB",unreadMessages:"Nav_unreadMessages__1WClG",active:"Nav_active__1fHfS"}},69:function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return o}),a.d(t,"b",function(){return l}),a.d(t,"c",function(){return i}),a.d(t,"d",function(){return u});var n=a(12),r=a(5),s=a(21),c={activeDialogId:0,currentConversationIndex:0,contactsMsg:[{sent:1672259715420,conversation:1,text:"Hello, how are u?",name:"Alex",answer:!0},{sent:1672259725420,conversation:1,text:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Maiores quidem facilis facere laboriosam, minima ullam excepturi, esse eligendi quasi debitis ab iure aperiam quisquam amet iusto animi pariatur a consectetur.",name:"Nikita"},{sent:1672259735420,conversation:1,text:"Good bye!",name:"Alex",answer:!0},{sent:1672259745420,conversation:1,text:"Good Night!!",name:"Nikita"},{sent:1672259755420,conversation:2,text:"Hi there!1",name:"Anthony"},{sent:1672259765420,conversation:2,text:"Hi there!2",name:"Anthony"},{sent:1672259775420,conversation:2,text:"Hi there!3",name:"Anthony"},{sent:1672259795420,conversation:2,text:"Hi there!3",name:"Anthony",answer:!0},{sent:1672259785420,conversation:2,text:"Hi there!4",name:"Anthony"},{sent:1677084416834,conversation:2,text:"123321",name:"Anthony"},{sent:1672251545420,conversation:2,text:"H! How r u?",name:"Alex",answer:!0},{sent:1672251545430,conversation:42,text:"H! How r u?",name:"Alex",answer:!0},{sent:1672251545440,conversation:42,text:"H! How r u?",name:"Alex",answer:!0},{sent:1672251565450,conversation:42,text:"H! How r u?",name:"Alex",answer:!0},{conversation:4,text:"Do you like my new IPhone 3Gs?",name:"Steve Jobs",sent:1672259755420},{conversation:4,text:"Do you like my new IPhone 3Gs?",name:"Steve Jobs",sent:1672259755420}],contactsData:[{id:1,name:"Nikita",unreadCounter:0,currentMessageText:"",currentMsgCount:0},{id:2,name:"Anthony",unreadCounter:1,currentMessageText:"",currentMsgCount:0},{id:3,name:"John Deer",unreadCounter:0,currentMessageText:"",currentMsgCount:0},{id:4,name:"Steve Jobs",unreadCounter:3,currentMessageText:"",currentMsgCount:0},{id:5,name:"Luke Skywalker",unreadCounter:3,currentMessageText:"",currentMsgCount:0}]},o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case s.h:var o=[],l=a.ownerId;return a.payload.forEach(function(e){var t=e.from_id==l;o.push({text:e.message,name:e.name,sent:e.sent,answer:t,conversation:t?e.contragent_id:e.from_id})}),console.log(o),Object(r.a)({},t,{contactsMsg:[].concat(o)});case s.e:var i=[];return console.log(a.arr),a.arr.forEach(function(e){i.push({id:e.contragent_id,name:e.name,unreadCounter:e.unread_counter,currentMessageText:""})}),console.log("contactsDataPayload >> ",i),Object(r.a)({},t,{contactsData:[].concat(i)});case s.f:var u=e.structuredClone(t.contactsData);return-1==(u=u.findIndex(function(e){return e.id==a.id}))&&(u=0),Object(r.a)({},t,{activeDialogId:a.id,currentConversationIndex:u});case s.i:var m=Object(n.a)(t.contactsData);return m[t.currentConversationIndex].currentMessageText=a.text,Object(r.a)({},t,{contactsData:m});case s.g:var d=e.structuredClone(t.contactsData);return d=d.map(function(e){return e.id==a.userId&&(e.unreadCounter=0),e}),Object(r.a)({},t,{contactsData:d});case s.d:console.log(t);var _={sent:(new Date).getTime(),conversation:t.contactsData[t.currentConversationIndex].id,text:t.contactsData[t.currentConversationIndex].currentMessageText,name:t.contactsData[t.currentConversationIndex].name,answer:!0},p=Object(n.a)(t.contactsMsg),f=Object(n.a)(t.contactsData);return f[t.currentConversationIndex].currentMessageText.trim()&&p.push(_),f[t.currentConversationIndex].currentMessageText="",Object(r.a)({},t,{contactsData:f,contactsMsg:p});default:return t}},l=function(){return{type:s.d}},i=function(e){return{type:s.f,id:e}},u=function(e){return{type:s.i,text:e}}}).call(this,a(43))},9:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a(457),r={sendUserWallPost:function(e,t,a){return n.a.post("http://127.0.0.1:3005/user_wall_posts",{from:e,to:t,message:a})},updateProfileSettings:function(e,t,a){var r={"Content-Type":"application/json",Authorization:e};return n.a.post("http://127.0.0.1:3005/update_user_settings",{id:a,settings:t},{headers:r})},updateUsersStatus:function(e,t,a){var r={"Content-Type":"application/json",Authorization:e};return n.a.post("http://127.0.0.1:3005/update_user_status",{id:t,statusText:a},{headers:r})},updatepost:function(e){var t;switch(e.type){case"editPost":t={type:e.type,postId:e.postId,message:e.message};break;case"updateLikes":t={type:e.type,postId:e.postId,likes:e.likes};break;case"deletePost":t={type:e.type,postId:e.postId};break;default:return}return n.a.post("http://127.0.0.1:3005/updatepost",t)},getCurrentUser:function(e){return n.a.get("http://127.0.0.1:3005/users/".concat(e))},getUsers:function(e,t,a,r){var s={"Content-Type":"application/json",Authorization:e};return n.a.get("http://127.0.0.1:3005/users?page=".concat(t,"&limit=").concat(a,"&id=").concat(r),{headers:s})},getFilteredUsers:function(e,t){return n.a.post("http://127.0.0.1:3005/filteredUsers",{name:"%".concat(e,"%"),page:t})},getUserFriendlist:function(e,t){return n.a.get("http://127.0.0.1:3005/user/friends?id=".concat(e),{headers:{Authorization:t}})},getUserPosts:function(e){return n.a.get("http://127.0.0.1:3005/user_wall_posts?to=".concat(e))},postFollowUser:function(e,t){return console.log("add to friend called from api",e,t),n.a.post("http://127.0.0.1:3005/follow/",{userId:e,followId:t})},deleteUnfollowUser:function(e,t){return n.a.post("http://127.0.0.1:3005/unfollow/",{userId:e,followId:t})},logout:function(){return n.a.delete("https://social-network.samuraijs.com/api/1.0/auth/login",{withCredentials:!0})},authentification:function(e,t){var a={"Content-Type":"application/json",Authorization:e};return n.a.post("http://127.0.0.1:3005/auth/me",{id:t},{headers:a})},authorizedMe:function(e,t){return n.a.post("http://localhost:3005/auth/login",{login:e,password:t})},getDialogContacts:function(e){return n.a.get("http://127.0.0.1:3005/messages/contacts?ownerId=".concat(e))},getDialogMessages:function(e,t){return n.a.get("http://127.0.0.1:3005/messages/get?ownerId=".concat(e,"&userId=").concat(t))}}}},[[225,3,2]]]);
//# sourceMappingURL=main.03f60543.chunk.js.map