{"version":3,"sources":["components/Users/Users.module.css","components/Profile/Profile-head.module.css","components/Messages/Messages.module.css","components/Posts/PostsWall.module.css","components/Header/react.png","assets/img/upload_prof_pic.svg","assets/img/upload_prof_pic_upload.svg","assets/img/authorized_Sam.jpg","redux/actionTypes.js","components/Header/Header.module.css","redux/wall-reducer.js","components/Header/Login.jsx","components/Header/Logout.jsx","components/Header/AuthContainer.jsx","components/Header/Header.jsx","components/Nav/Nav.jsx","components/Posts/Wall.jsx","components/Profile/UserProfileInfo.jsx","components/Posts/LikeCounter.jsx","components/Posts/post.jsx","components/Posts/WallContainer.jsx","components/Messages/Contact.jsx","components/Messages/ContactsWindow.jsx","components/Messages/Msg.jsx","components/Messages/DialogWindow.jsx","components/Messages/Messages.jsx","redux/users-reducer.js","redux/auth-reducer.js","redux/redux.js","components/Users/Users.jsx","components/Users/User-profile-block.jsx","components/Preloader/Preloader.jsx","components/Users/generatePagination.js","components/Modals/UsersModal.jsx","components/Users/ModalNewMessage.jsx","components/Users/UsersContainer.jsx","components/Profile/UserProfilePage.jsx","components/Profile/UserProfilePageContainer.jsx","components/Header/Register.jsx","components/Header/RegisterContainer.jsx","components/Friends/UserFriendsListContainer.jsx","components/ProfileSettings/ProfileSettings.jsx","components/ProfileSettings/ProfileSettingsContainer.jsx","App.js","reportWebVitals.js","index.js","components/Nav/Nav.module.css","redux/message-reducer.js","DAL/api.js"],"names":["module","exports","container","user_profile","user_name","user_avatar","user_link","right_side","button","remove","add","send__message","left_side","elem","active_elem","user_search__input","user__search_block","modal__block","modal__block_content","active","modal__block_newMessage","modal__block_textarea","modal__block_middle","modal__block_button","modal__block_userData","profile__pic","profile__pic_changer","profile__pic_changer_pic","profile_info","avatar","profile_text","status","upload_photo","hidden","green","remove_friend","add_friend","send_message","contacts","items_list","item","unreadMessages","dialogContainer","screen","person","ava","message","content","answer","name","area","postswall","add_new_post","posts","post","delete","edit","likes_container","likes","liked","not__autorized_block","image","__webpack_require__","p","d","__webpack_exports__","TYPE_ON_WALL_TEXTAREA","ADD_POST","EDIT_POST","UPDATE_LIKES","DELETE_POST","SEND_MESSAGE","SET_CONVERSATION_ID","TYPE_ON_PRIMARY_MESSAGE_TEXTAREA","SET_TO_NULL_UNREAD_COUNTER","SET_CONTACTS","SET_USER_MESSAGES","header","logo","auth__block","auth__block_input","auth__block_label","welcome","welcome__name","auth__block_error","auth__block_notice","register__block","register__link","_wallState","updated","textAreaState","editData","index","postId","userPosts","id","sent","wallReducer","state","arguments","length","undefined","action","type","_objectSpread","value","incomeUserPosts","JSON","stringify","parse","map","el","date","Date","getTime","newPost","crypto","randomUUID"," message","addPostUpdateData","global","structuredClone","addPostUpdateEditStatus","trim","unshift","postMessageToEdit","editPostUpdateData","postsClone","postLikes","_toConsumableArray","includes","likeIndex","indexOf","splice","push","deletePostUpdateData","typeOnWallTextArea","deletePost","editPost","getUserPostsThunkCreator","ownerId","dispatch","usersAPI","getUserPosts","then","res","data","Auth","_ref","setPass","setLogin","authorizeMe","login","pass","errorMessage","React","createElement","Fragment","className","h","onSubmit","e","preventDefault","htmlFor","placeholder","onChange","target","required","Link","to","Logout","logout","l","onClick","path","AuthContainer","_useState","useState","_useState2","_slicedToArray","_useState3","_useState4","password","setPassword","cookies","Cookies","useSelector","authReducer","useDispatch","isAuthorized","authorized","token","get","useEffect","isExpired","authentification","decodeToken","userData","userInfo","authorizedMe","set","catch","err","code","response","Header","src","alt","Nav","messageReducer","contactsData","unreadCounter","reduce","acc","cur","setActive","isActive","concat","n","nav","item_list","NavLink","Wall","userId","typeTextArea","addPost","from","updatepost","console","log","sendUserWallPost","pw","cols","rows","onKeyDown","key","ctrlKey","tabIndex","UserProfileInfo","ref","useRef","profPicRef","statusText","photo","setPhoto","profPic","setProfPic","onSubmitUploadProfPic","formData","FormData","append","axios","profilePic","filePath","fetchAndDispatchProfilePic","onSubmitSettings","fetchAndDispathAvatar","ph","srcset","uploadPic","current","click","uploadPicReady","accept","files","height","onBlur","updateUsersStatus","profile_content","email","info","city","gender","age","LikeCounter","props","isLiked","setIsLiked","Post","deleteFunc","onEdit","dateTime","toLocaleTimeString","hour","minute","dateDay","toLocaleDateString","homeLander","fromId","fromName","text","WallContainer","usersReducer","currentProfilePageUserInfo","i","from_id","w","authorizedSamPicture","Contact","m","ContactsWindow","getDialogContacts","arr","contragent_id","Msg","time","DialogWindow","msgStateLength","contactsMsg","params","useParams","sendMsg","to_id","msg","filter","currentMessageText","sendMessage","getDialogMessages","payload","setConversationId","messages","Object","assign","conversation","activeDialogId","ScrollToBottom","typeOnPrimaryMsgTextArea","currentConversationIndex","Messages","title","_usersState","isFetching","currentUsersPage","usersPerList","totalUsersCount","totalPages","users","userFriendlist","fullName","aboutMe","userWallPosts","getUserListThunkCreator","getState","getUsers","totalUsers","friendList","friends","_authState","rootReducer","combineReducers","CPPUIcopy","usersCopy","followed","currentUserProfileCopy","page","totalPagesCopy","Math","ceil","currentUsersPageCopy","userDataCopy","store","createStore","applyMiddleware","thunk","Users","loadMoreUsers","pages","userSearchValue","searchUserInputHandler","u","UserProfileBlock","followUser","unfollowUser","follow","upd","setUpd","setId","PreloaderBlock","Preloader","generatePagination","curPage","UsersModal","children","stopPropagation","ModalNewMessage","modalData","setModalActive","textareaInput","setTextareaInput","isSent","setSent","setTimeout","UsersContainer","subscribe","setSubscribe","setFetching","_useState5","_useState6","serUserSearchValue","_useState7","_useState8","isModalActive","_useState9","_useState10","setModalData","sendMessageModalHandler","getFilteredUsers","followId","postFollowUser","deleteUnfollowUser","UserProfilePage","isFriend","facebook","vk","twitter","github","UserProfilePageContainer","userProfileData","userReducerState","wallReducerState","param","forEach","getCurrentUser","profile_background","Register","registerUser","setEmail","RegisterContainer","isSuccsessRegistration","setIsSuccsessRegistration","UserFriendsListContainer","ProfileSettings","ProfileSettingsContainer","success","setSuccess","updateProfileSettings","App","Provider","BrowserRouter","Routes","Route","element","reportWebVitals","onPerfEntry","Function","bind","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","createRoot","document","getElementById","render","_messageState","currentMsgCount","contactsMsgPayload","contactsDataPayload","unread_counter","getIndex","findIndex","updCurrMsgText","contactsDataCopy","newMessage","newMessageToPush","nullContactCurrentMsg","axios__WEBPACK_IMPORTED_MODULE_0__","settings","headers","Content-Type","Authorization","body","limit","getUserFriendlist","withCredentials"],"mappings":"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","file":"static/js/main.03f60543.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Users_container__Ab32D\",\"user_profile\":\"Users_user_profile__3TOVQ\",\"user_name\":\"Users_user_name__2EqMn\",\"user_avatar\":\"Users_user_avatar__1He4Q\",\"user_link\":\"Users_user_link__2SkEQ\",\"right_side\":\"Users_right_side__3ws8O\",\"button\":\"Users_button__2IIyP\",\"remove\":\"Users_remove__11up6\",\"add\":\"Users_add__1lc0Q\",\"send__message\":\"Users_send__message__BO04P\",\"left_side\":\"Users_left_side__3683J\",\"elem\":\"Users_elem__1mchy\",\"active_elem\":\"Users_active_elem__38asS\",\"user_search__input\":\"Users_user_search__input__2aeHn\",\"user__search_block\":\"Users_user__search_block__2KLyQ\",\"modal__block\":\"Users_modal__block__2FMP0\",\"modal__block_content\":\"Users_modal__block_content__oGkhR\",\"active\":\"Users_active__1lZBV\",\"modal__block_newMessage\":\"Users_modal__block_newMessage__3aesZ\",\"modal__block_textarea\":\"Users_modal__block_textarea__1uH3-\",\"modal__block_middle\":\"Users_modal__block_middle__3hqHY\",\"modal__block_button\":\"Users_modal__block_button__RDTb_\",\"modal__block_userData\":\"Users_modal__block_userData__33oTN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profile__pic\":\"Profile-head_profile__pic__3Ua-l\",\"profile__pic_changer\":\"Profile-head_profile__pic_changer__3DuQA\",\"profile__pic_changer_pic\":\"Profile-head_profile__pic_changer_pic__wHFQc\",\"profile_info\":\"Profile-head_profile_info__2PR8y\",\"avatar\":\"Profile-head_avatar__19DVz\",\"profile_text\":\"Profile-head_profile_text__3swTc\",\"status\":\"Profile-head_status__395ak\",\"upload_photo\":\"Profile-head_upload_photo__1RFom\",\"hidden\":\"Profile-head_hidden__31yCy\",\"green\":\"Profile-head_green__3mwPq\",\"button\":\"Profile-head_button__3gp5u\",\"remove_friend\":\"Profile-head_remove_friend__2Z3dp\",\"add_friend\":\"Profile-head_add_friend__3Z_a7\",\"send_message\":\"Profile-head_send_message__14cuZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Messages_container__1ly3v\",\"contacts\":\"Messages_contacts__3nMF8\",\"items_list\":\"Messages_items_list__2k_26\",\"item\":\"Messages_item__o5vQu\",\"active\":\"Messages_active__3KA4z\",\"unreadMessages\":\"Messages_unreadMessages__1ZW1S\",\"dialogContainer\":\"Messages_dialogContainer__26PQW\",\"screen\":\"Messages_screen__1v4Cy\",\"person\":\"Messages_person__KkHat\",\"ava\":\"Messages_ava__2wA09\",\"message\":\"Messages_message__3wg6d\",\"content\":\"Messages_content__LWMF-\",\"answer\":\"Messages_answer__1SZpL\",\"name\":\"Messages_name__1ppF6\",\"area\":\"Messages_area__heOGk\",\"button\":\"Messages_button__w1vfq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"postswall\":\"PostsWall_postswall__DvihT\",\"add_new_post\":\"PostsWall_add_new_post__3fkH8\",\"button\":\"PostsWall_button__nZwTQ\",\"posts\":\"PostsWall_posts__fjTyI\",\"post\":\"PostsWall_post__3scAa\",\"name\":\"PostsWall_name__Fbn0r\",\"delete\":\"PostsWall_delete__1kRHD\",\"edit\":\"PostsWall_edit__2clwa\",\"likes_container\":\"PostsWall_likes_container__2fHvk\",\"likes\":\"PostsWall_likes__SLJwD\",\"liked\":\"PostsWall_liked__27Tqa\",\"user_link\":\"PostsWall_user_link__2YCAG\",\"not__autorized_block\":\"PostsWall_not__autorized_block__FhXmf\",\"image\":\"PostsWall_image__kVCjL\"};","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/upload_prof_pic.cdbabb81.svg\";","module.exports = __webpack_public_path__ + \"static/media/upload_prof_pic_upload.8dc79ec1.svg\";","module.exports = __webpack_public_path__ + \"static/media/authorized_Sam.a944f518.jpg\";","export const TYPE_ON_WALL_TEXTAREA = 'TYPE_ON_WALL_TEXTAREA';\r\nexport const ADD_POST = 'ADD_POST';\r\nexport const EDIT_POST = 'EDIT_POST';\r\nexport const UPDATE_LIKES = 'UPDATE_LIKES';\r\nexport const DELETE_POST = 'DELETE_POST';\r\n\r\nexport const SEND_MESSAGE = 'SEND_MESSAGE';\r\nexport const SET_CONVERSATION_ID = 'SET_CONVERSATION_ID';\r\nexport const TYPE_ON_PRIMARY_MESSAGE_TEXTAREA = 'TYPE_ON_PRIMARY_MESSAGE_TEXTAREA';\r\nexport const SET_TO_NULL_UNREAD_COUNTER = 'SET_TO_NULL_UNREAD_COUNTER';\r\n\r\nexport const SET_CONTACTS = 'SET_CONTACTS';\r\nexport const SET_USER_MESSAGES = 'SET_USER_MESSAGES';\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__NANXn\",\"logo\":\"Header_logo__1yFvT\",\"auth__block\":\"Header_auth__block__2fVT1\",\"auth__block_input\":\"Header_auth__block_input__1niTR\",\"auth__block_label\":\"Header_auth__block_label__1mSJx\",\"button\":\"Header_button__15dY1\",\"welcome\":\"Header_welcome__1H_fd\",\"welcome__name\":\"Header_welcome__name__2gcvi\",\"auth__block_error\":\"Header_auth__block_error__3CyGE\",\"auth__block_notice\":\"Header_auth__block_notice__ZZhSe\",\"register__block\":\"Header_register__block__h1JeZ\",\"register__link\":\"Header_register__link__2CVq9\"};","import { TYPE_ON_WALL_TEXTAREA, ADD_POST, EDIT_POST, UPDATE_LIKES, DELETE_POST  } from \"./actionTypes\";\r\nimport { usersAPI } from '../DAL/api';\r\nimport { createAsyncThunk } from '@reduxjs/toolkit';\r\n\r\n let _wallState = {\r\n    updated: false,\r\n    textAreaState: '',\r\n    editData: {\r\n        status: false,\r\n        index: 0,\r\n        postId: 0\r\n    },\r\n    userPosts: [\r\n        {\r\n            id: 1,\r\n             message: 'Lorem, ipsum dolor sit amet consectetur adipisicing elit. Unde, aperiam maiores odio vero molestias aspernatur eum temporibus magnam natus ducimus repudiandae adipisci necessitatibus quibusdam obcaecati voluptatibus facere neque tempora nulla.',\r\n            likes: [9, 2, 3, 1],\r\n            sent: 1672259123420,\r\n        },\r\n        {\r\n            id: 2,\r\n             message: 'This is the second post!',\r\n            likes: [],\r\n            sent: 1672259215520,\r\n        },\r\n        {\r\n            id: 3,\r\n             message: 'Props is props. message named!',\r\n            likes: [2, 3],\r\n            sent: 1672259164367,\r\n        },\r\n        {\r\n            id: 4,\r\n             message: '4th post is here.',\r\n            likes: [],\r\n            sent: 1672259713457,\r\n        },\r\n        {\r\n            id: 5,\r\n             message: 'Lorem, ipsum dolor sit amet consectetur adipisicing elit. Unde, aperiam maiores odio vero molestias aspernatur eum temporibus magnam natus ducimus repudiandae adipisci necessitatibus quibusdam obcaecati voluptatibus facere neque tempora nulla.',\r\n            likes: [1, 2, 32, 323, 23],\r\n            sent: 1672251643744,\r\n        },\r\n        {\r\n            id: 'someRandomId',\r\n             message: 'Lorem, ipsum dolor sit amet consectetur adipisicing elit. Unde, aperiam maiores odio vero molestias aspernatur eum temporibus magnam natus ducimus repudiandae adipisci necessitatibus quibusdam obcaecati voluptatibus facere neque tempora nulla.',\r\n            likes: [1],\r\n            sent: 1672259719420,\r\n        }\r\n    ]\r\n}\r\n\r\nexport const wallReducer = (state = _wallState, action) => {\r\n\r\n    switch (action.type) {\r\n\r\n        case TYPE_ON_WALL_TEXTAREA: {\r\n            return {\r\n                ...state,\r\n                textAreaState: action.value\r\n            }\r\n        }\r\n        case 'UPDATE_USER_POSTS_STATE' : {\r\n            let incomeUserPosts = JSON.stringify(action.posts);\r\n            incomeUserPosts = JSON.parse(incomeUserPosts);\r\n            incomeUserPosts = incomeUserPosts.map(el =>{\r\n                let date = new Date(el.updated)\r\n                el.updated = date.getTime();\r\n                el.likes = JSON.parse(el.likes)\r\n                return el\r\n            });\r\n            \r\n            return {\r\n                ...state,\r\n                userPosts: incomeUserPosts\r\n            }\r\n        }\r\n        case 'ADD_POST': {\r\n\r\n            let newPost = { 'id': crypto.randomUUID(), ' message': state.textAreaState, likes: [], sent: new Date().getTime()}\r\n            let addPostUpdateData = global.structuredClone(state.userPosts);\r\n            let addPostUpdateEditStatus = {...state.editData}\r\n\r\n\r\n\r\n            if (!state.editData.status) {\r\n                state.textAreaState.trim() && addPostUpdateData.unshift(newPost);\r\n            }\r\n            else {\r\n                if (state.textAreaState.trim())  {\r\n                    addPostUpdateData[addPostUpdateEditStatus.index].message = state.textAreaState;\r\n                }\r\n               \r\n            }\r\n            return {\r\n                ...state,\r\n                userPosts : addPostUpdateData,\r\n                textAreaState : '',\r\n                editData: {\r\n                    ...state.editData,\r\n                    status: false\r\n                }\r\n            }\r\n        }\r\n\r\n        case EDIT_POST: {\r\n         \r\n            let postsClone = global.structuredClone(state.userPosts);\r\n            let postMessageToEdit = postsClone[action.index].message;\r\n\r\n            let editPostUpdateData = {...state.editData}\r\n\r\n            editPostUpdateData.status = true;\r\n            editPostUpdateData.index = action.index;\r\n            editPostUpdateData.postId = action.postId;\r\n\r\n            return {\r\n                ...state, \r\n                textAreaState: postMessageToEdit, \r\n                editData: editPostUpdateData,\r\n\r\n            };\r\n        }\r\n        \r\n        case UPDATE_LIKES: {\r\n\r\n            let postsClone = global.structuredClone(state.userPosts);\r\n            let postLikes = [...postsClone[action.index].likes]\r\n            let id = action.id;\r\n\r\n\r\n            if (!postLikes.includes(id)) postLikes.push(id)\r\n            else {\r\n                let likeIndex = postLikes.indexOf(id);\r\n                postLikes.splice(likeIndex, 1);\r\n            }\r\n            postsClone.likes = postLikes;\r\n\r\n            return {\r\n                ...state,\r\n                userPosts: postsClone,\r\n            };\r\n        }\r\n         \r\n        case DELETE_POST: {\r\n            let deletePostUpdateData = global.structuredClone(state.userPosts);\r\n            deletePostUpdateData.splice(action.index, 1);\r\n            return {...state,\r\n                userPosts: deletePostUpdateData\r\n            };\r\n        }\r\n            default:\r\n            return state;\r\n    }\r\n\r\n}\r\n\r\n\r\nexport const typeOnWallTextArea = (value) => {\r\n    return {type: TYPE_ON_WALL_TEXTAREA, value: value}\r\n}\r\nexport const addPost = () => {\r\n    return {type: ADD_POST}\r\n}\r\nexport const deletePost = (index) => {\r\n    return {type: DELETE_POST, index: index}\r\n}\r\nexport const editPost = (index, postId) => {\r\n    return {type: EDIT_POST, postId: postId, index: index}\r\n}\r\nexport const updateLikes = (index, userId) => {\r\n    return {type: UPDATE_LIKES, index: index, id: userId}\r\n}\r\n\r\n\r\nexport const getUserPostsThunkCreator = (ownerId) => {\r\n    return dispatch => {\r\n        usersAPI.getUserPosts(ownerId).then(res => {\r\n            dispatch({ type: 'UPDATE_USER_POSTS_STATE', posts: res.data.posts })\r\n        })\r\n    }\r\n}","import React from 'react'\r\nimport h from './Header.module.css';\r\nimport { Link } from 'react-router-dom';  \r\n\r\nfunction Auth({setPass, setLogin, authorizeMe, login, pass, errorMessage}) {\r\n\r\n    function authorization (e) {\r\n        e.preventDefault();\r\n        authorizeMe(login, pass)\r\n    }\r\n\r\n    return (\r\n        <>\r\n        \r\n            <div className={h.auth__block}>\r\n                <form action=\"submit\" onSubmit={authorization}>\r\n                    <label className={h.auth__block_label} htmlFor=\"login\">Login:</label>\r\n                    <input className={h.auth__block_input} placeholder='Login' type=\"text\" id='login' onChange={(e) => setLogin(e.target.value)} value={login} required/>\r\n                    <label className={h.auth__block_label} htmlFor=\"pass\">Password:</label>\r\n                    <input className={h.auth__block_input} placeholder='Password' type=\"text\" id='pass' onChange={(e) => setPass(e.target.value)} value={pass} required/>\r\n                    <button className={h.button} type='submit'>Log in</button>\r\n                </form>\r\n                <div className={h.auth__block_notice}>{errorMessage && <span className={h.auth__block_error}>{errorMessage}</span>}</div>\r\n        <div className={h.register__link}>\r\n        <Link to={'/register'}>Register</Link>\r\n        </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Auth;","import React from 'react'\r\nimport l from './Header.module.css';\r\nfunction Logout ({logout, name}) {\r\n\r\n\r\n    return (\r\n        <>\r\n            <div className={l.welcome}>\r\n                ,  <span className={l.welcome__name}> {name}! </span>\r\n                <button className={l.button} onClick={logout} path='/'>Log out</button>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Logout;","import React, { useEffect, useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport Auth from './Login';\r\nimport Logout from './Logout';\r\nimport { usersAPI } from '../../DAL/api';\r\nimport Cookies from 'universal-cookie';\r\nimport { isExpired, decodeToken } from \"react-jwt\";\r\nimport redirect from 'react-router-dom';\r\n\r\nfunction AuthContainer() {\r\n\r\n\r\n    const [login, setLogin] = useState('');\r\n    const [password, setPassword] = useState('');\r\n\r\n    const cookies = new Cookies();\r\n    let state = useSelector(state => state.authReducer);\r\n    let dispatch = useDispatch();\r\n    let isAuthorized = useSelector(state => state.authReducer.authorized);\r\n    let token = cookies.get('cookie localhost');\r\n\r\n\r\n    useEffect(() => {\r\n        if (!isExpired(token)) {\r\n            usersAPI.authentification(token, decodeToken(token).id)\r\n                .then(res => {\r\n                    let id = decodeToken(token).id\r\n                    dispatch({ type: 'SET_USER_INFO_AFTER_LOGIN', userData: res.data.userInfo, id: id })\r\n                    dispatch({ type: 'SET_AUTHORIZED', authorized: true })\r\n                })\r\n        }\r\n        else {\r\n            cookies.remove('cookie localhost')\r\n            dispatch({ type: 'SET_AUTHORIZED', authorized: false })\r\n            dispatch({ type: 'REMOVE_USER_DATA' })\r\n            return <redirect to={'/'} />\r\n        }\r\n\r\n    }, [])\r\n\r\n    function authorizeMe(login, pass) {\r\n\r\n\r\n        usersAPI.authorizedMe(login, pass)\r\n            .then(res => {\r\n                if (res.status == 200) {\r\n                    cookies.set('cookie localhost', res.data.token, {})\r\n                    dispatch({ type: 'SET_USER_INFO_AFTER_LOGIN', userData: res.data.userInfo, id: res.data.userInfo.id })\r\n                    dispatch({ type: 'SET_AUTHORIZED', authorized: true, errorMessage: null })\r\n\r\n                }\r\n            })\r\n            .catch(err => {\r\n                // console.log(err);\r\n                if (err.code == 'ERR_NETWORK') return dispatch({ type: 'SET_AUTHORIZED', authorized: false, errorMessage: 'some problems with network' })\r\n                else if (err.response.status == 400) return dispatch({ type: 'SET_AUTHORIZED', authorized: false, errorMessage: 'wrong password or login' })\r\n            })\r\n\r\n    }\r\n    function logoutMe() {\r\n        cookies.remove('cookie localhost');\r\n        dispatch({ type: 'SET_AUTHORIZED', authorized: false });\r\n    }\r\n\r\n\r\n    return (\r\n\r\n        <>\r\n\r\n            {isAuthorized ?\r\n                <Logout logout={logoutMe} name={state.userData.name} />\r\n                :\r\n                <Auth errorMessage={state.errorMessage} state={state} setLogin={setLogin} setPass={setPassword} login={login} pass={password} authorizeMe={authorizeMe} />\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default AuthContainer;","import React from 'react';\r\nimport h from './Header.module.css';\r\nimport logo from './react.png';\r\nimport { Link } from 'react-router-dom';\r\nimport AuthContainer from './AuthContainer';\r\n\r\nconst Header = () => {\r\n    return (\r\n    <header className={h.header}>\r\n    <div className={h.logo}>\r\n    <Link to=\"/\">\r\n    <img src={logo} alt='logo' />\r\n    </Link>\r\n\r\n    </div>\r\n    <AuthContainer />\r\n  </header>\r\n)};\r\n\r\nexport default Header;","import React, { useEffect } from 'react';\r\nimport n from './Nav.module.css';\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { connect, useSelector } from 'react-redux' \r\n\r\nconst Nav = () => {\r\n  \r\n  let isAuthorized = useSelector(state => state.authReducer.authorized)\r\n\r\n  let state = useSelector(state => state.messageReducer)\r\n\r\n\r\n  let unreadMessages = state.contactsData\r\n  .map((item) => item.unreadCounter);\r\n  unreadMessages = unreadMessages.reduce((acc,cur) => acc+cur);\r\n\r\n\r\n\r\n  const setActive = ({isActive}) => isActive ? `${n.active} ${n.item}` : n.item;\r\n  \r\n  return <>\r\n   { isAuthorized && <nav className={n.nav}>\r\n    <div className={n.item_list}> \r\n    {isAuthorized ? \r\n      <>\r\n      <NavLink to=\"/\" className = {setActive} >Posts Wall</NavLink>\r\n      <NavLink to=\"/messages\" className = {setActive}>Messages {unreadMessages > 0 && <span className={n.unreadMessages}>{unreadMessages}</span>}</NavLink>\r\n      <NavLink to=\"/users_list\" className = {setActive}>Users</NavLink> \r\n      <NavLink to=\"/friends\" className = {setActive}>Friends</NavLink> \r\n\r\n      <NavLink to=\"/music\" className = {setActive}>Music</NavLink>\r\n      <NavLink to=\"/settings\" className = {setActive}>Settings</NavLink>\r\n      </>\r\n      : ''}\r\n    </div>\r\n  </nav>}\r\n  </>\r\n};\r\n\r\nexport default Nav;","import React from 'react';\r\nimport pw from './PostsWall.module.css';\r\n\r\n\r\n\r\nconst Wall = ({ state, posts, ownerId, userId, typeTextArea, dispatch, usersAPI }) => {\r\n\r\nfunction addPost(from, to, message) {\r\n    if (message.trim()) {\r\n        if (!state.editData.status) {\r\n            dispatch({ type: 'ADD_POST' })\r\n            usersAPI.sendUserWallPost(from, to, message).then(res => {\r\n            })\r\n        }\r\n        else {\r\n            dispatch({ type: 'ADD_POST' })\r\n            usersAPI.updatepost({ type: 'editPost', postId: state.editData.postId, message: state.textAreaState }).then(res => console.log(res))\r\n        }\r\n    }\r\n}\r\n       return <>\r\n        <div className={pw.postswall}>\r\n            <div className={pw.add_new_post}>\r\n                <textarea cols=\"80\" rows=\"1\" placeholder='New post about..'\r\n                    onChange={typeTextArea}\r\n                    onKeyDown={(e) => (e.key === 'Enter' && e.ctrlKey) ? addPost(ownerId, userId || ownerId, state.textAreaState) : ''} value={state.textAreaState} tabIndex=\"13\" ></textarea>\r\n                <button onClick={() => {addPost(ownerId, userId || ownerId, state.textAreaState)}} className={pw.button}>Post it!</button>\r\n            </div>\r\n        </div>\r\n\r\n        <div className={pw.posts}>\r\n            {posts}\r\n        </div>\r\n    </>\r\n}\r\n\r\nexport default Wall;","import axios from 'axios';\r\nimport React, { useRef } from 'react';\r\nimport { useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport Cookies from 'universal-cookie';\r\nimport { usersAPI } from '../../DAL/api';\r\nimport ph from './Profile-head.module.css';\r\nimport uploadPic from '../../assets/img/upload_prof_pic.svg';\r\nimport uploadPicReady from '../../assets/img/upload_prof_pic_upload.svg';\r\n\r\nconst UserProfileInfo = () => {\r\n\r\n  let ref = useRef();\r\n  let profPicRef = useRef();\r\n  let statusText = useSelector(state => state.authReducer.userData.status);\r\n  const ownerId = useSelector(state => state.authReducer.id);\r\n  let [photo, setPhoto] = useState(false);\r\n  let [profPic, setProfPic] = useState(false);\r\n  const dispatch = useDispatch();\r\n  const userData = useSelector(state => state.authReducer.userData);\r\n  const cookie = new Cookies();\r\n  const token = cookie.get('cookie localhost');\r\n\r\n  // const statusHandler = (e) => {\r\n  //   dispatch({type:''})\r\n  // }\r\n\r\n  function photoHandler (e) {\r\n    e.preventDefault();\r\n    setPhoto(e.target.files[0])\r\n  }\r\n\r\n  function profilePicUploadHandler (e) {\r\n    e.preventDefault();\r\n    setProfPic(e.target.files[0])\r\n  }\r\n\r\n   function fetchAndDispathAvatar (formData) {\r\n    axios.post('http://127.0.0.1:3005/upload?type=photo', formData)\r\n    .then(res => {\r\n         dispatch({ type: 'USER_PHOTO_SETTINGS_HANDLER', photo: res.data.filePath });\r\n    })\r\n  }\r\n\r\n   function updateProfileSettings () {\r\n    usersAPI.updateProfileSettings(token, userData, ownerId).then((res) => {\r\n      setPhoto(false)\r\n    })\r\n  }\r\n\r\n function fetchAndDispatchProfilePic (formData) {\r\n  axios.post('http://127.0.0.1:3005/upload?type=profile_background', formData)\r\n  .then(res => {\r\n       dispatch({ type: 'USER_PROFILE_PIC_HANDLER', profilePic: res.data.filePath });\r\n  })\r\n}\r\n\r\n function onSubmitUploadProfPic(e) {\r\n    e.preventDefault();\r\n\r\n    let formData = new FormData();\r\n    formData.append('file', profPic);\r\n    formData.append('id', ownerId); \r\n\r\n    fetchAndDispatchProfilePic(formData);\r\n    setProfPic(false);\r\n  }\r\n\r\n   function onSubmitSettings(e) {\r\n    e.preventDefault();\r\n\r\n    let formData = new FormData();\r\n    formData.append('file', photo);\r\n    formData.append('id', ownerId);\r\n\r\n   fetchAndDispathAvatar (formData);\r\n   setPhoto(false);\r\n}\r\n\r\nfunction updateUserStatusText (e) {\r\n  return dispatch({type:'USER_STATUS_TEXT_HANDLER', statusText: e.target.value})\r\n}\r\nfunction setUserStatusText () {\r\n  usersAPI.updateUsersStatus(token, ownerId, statusText).then(res => console.log(res))\r\n}\r\n\r\n    return <> \r\n    <div className={ph.profile__pic}>\r\n    <img src={userData.profilePic || \"https://cdn.huckletree.com/web-uploads/2018/10/23094022/OS-Blog-Header-32.png\"} alt=\"\" srcset=\"\" />\r\n      {profPic ?\r\n      <div onClick={(e) => onSubmitUploadProfPic(e)} className={`${ph.profile__pic_changer} ${ph.green}`}><img className={ph.profile__pic_changer_pic} src={uploadPic} alt=\"\"/></div>\r\n      :\r\n      <div onClick={() => profPicRef.current.click()} className={ph.profile__pic_changer}><img className={ph.profile__pic_changer_pic} src={uploadPicReady} alt=\"\"/></div>\r\n      }\r\n\r\n      <input type=\"file\" className={ph.hidden} accept='image/*, .png, .jpg, .jpeg' onChange={profilePicUploadHandler} ref={profPicRef}/>\r\n    </div>\r\n    <div className={ph.profile_info}>\r\n      <div className={ph.avatar}>\r\n      <img src={userData.photo || \"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Circle-icons-profile.svg/200px-Circle-icons-profile.svg.png\"} alt={userData.name} height=\"200\" />\r\n      {photo ? \r\n      <div className={`${ph.upload_photo} ${ph.green}`} onClick={(e) => onSubmitSettings(e)} >Upload on server</div>\r\n      :\r\n      <div className={ph.upload_photo} onClick={() => ref.current.click()} >Choose photo</div>\r\n      }\r\n      <input type=\"file\" className={ph.hidden} accept='image/*, .png, .jpg, .jpeg' onChange={photoHandler} ref={ref}/>\r\n      </div>\r\n      <div className={ph.profile_text}>\r\n        <h2 className={ph.name}>{userData.name}</h2>\r\n        <div><input className={ph.status} type=\"text\" onBlur={setUserStatusText} onChange={updateUserStatusText} placeholder=' ..' value={statusText}/></div>\r\n        <div className={ph.profile_content}>\r\n          <p><i>Contact email: {userData.email}</i></p>\r\n          <p>City: {userData.info.city}</p>\r\n          <p>Gender: {userData.info.gender}</p>\r\n          <p>Age: {userData.info.age}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    </>\r\n};\r\n\r\nexport default UserProfileInfo;","import React from \"react\";\r\nimport pw from './PostsWall.module.css';\r\nimport { useState } from \"react\";\r\nimport { usersAPI } from \"../../DAL/api\";\r\n\r\n\r\n\r\nconst LikeCounter = (props) => {\r\n\r\n    let likes = props.likes.length;\r\n\r\n    let [isLiked , setIsLiked] = useState(props.likes.includes(props.ownerId));\r\n\r\n\r\n\r\n    function likeIt () {\r\n\r\n        setIsLiked(isLiked ? false : true);\r\n        let postLikes = props.likes;\r\n        if (!postLikes.includes(props.ownerId)) postLikes.push(props.ownerId)\r\n        else {\r\n                let likeIndex = postLikes.indexOf(props.ownerId);\r\n                postLikes.splice(likeIndex, 1);\r\n            }\r\n\r\n            console.log(postLikes);\r\n        usersAPI.updatepost({ type:'updateLikes', postId: props.postId, likes: postLikes }).then(res => console.log(res));\r\n        // props.dispatch(updateLikes(props.index, props.userId));\r\n        \r\n    }\r\n\r\n    return (\r\n        <span className={pw.likes_container}>\r\n            <i className={isLiked ? pw.likes + ' ' + pw.liked : pw.likes} onClick={likeIt}></i>\r\n            {likes <= 0 ? '' : likes} {likes <= 0 ? 'No one like it' : likes == 1 ? 'Like it!' : 'Likes it!'}\r\n        </span>\r\n    )\r\n}\r\nexport default LikeCounter;","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { usersAPI } from \"../../DAL/api\";\r\nimport { deletePost, editPost } from \"../../redux/wall-reducer\";\r\nimport LikeCounter from \"./LikeCounter\";\r\nimport pw from './PostsWall.module.css';\r\n\r\n\r\n\r\n\r\nconst Post = (props) => {\r\n    let deleteFunc = () => {\r\n        usersAPI.updatepost({postId: props.postId, type: 'deletePost'}).then(res => console.log(res))\r\n        props.dispatch(deletePost(props.index));\r\n    }\r\n\r\n    function onEdit () {\r\n        props.dispatch(editPost(props.index, props.postId))\r\n    } \r\n\r\n\r\n    let date = new Date(props.sent);\r\n    let dateTime = date.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});\r\n    let dateDay = date.toLocaleDateString();\r\n\r\n    return <>\r\n        <div className={pw.post}>\r\n        {props.homeLander ? \r\n        props.fromId == props.ownerId ?  <>\r\n        <i className={pw.edit} onClick={onEdit}></i>\r\n        <i className={pw.delete} onClick={deleteFunc}></i>\r\n        </>\r\n        :\r\n        <i className={pw.delete} onClick={deleteFunc}></i>\r\n        :\r\n        props.fromId == props.ownerId ?\r\n        <>\r\n        <i className={pw.edit} onClick={onEdit}></i>\r\n        <i className={pw.delete} onClick={deleteFunc}></i>\r\n        </>\r\n        :\r\n        ''\r\n        }\r\n            <p className={pw.name}><Link className={pw.user_link} to={`/user/${props.fromId}`}>{props.fromName}</Link><span>{dateDay} at {dateTime}</span></p>\r\n            <pre>{props.text}</pre>\r\n            <LikeCounter dispatch = {props.dispatch} likes={props.likes} index={props.index} postId={props.postId} ownerId={props.ownerId} />\r\n        </div>\r\n\r\n    </>\r\n}\r\n\r\nexport default Post;","import React, { useEffect } from 'react'\r\nimport Wall from './Wall';\r\nimport UserProfileInfo from '../Profile/UserProfileInfo';\r\nimport Post from './post';\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { usersAPI } from '../../DAL/api';\r\nimport w from './PostsWall.module.css';\r\nimport authorizedSamPicture from '../../assets/img/authorized_Sam.jpg'\r\nimport { typeOnWallTextArea } from '../../redux/wall-reducer';\r\nimport { getUserPostsThunkCreator } from '../../redux/wall-reducer';\r\nimport axios from 'axios';\r\n\r\nfunction WallContainer() {\r\n\r\n    const isAuthorized = useSelector(state => state.authReducer.authorized);\r\n    const ownerId = useSelector(state => state.authReducer.id);\r\n    const userId = useSelector(state => state.usersReducer.currentProfilePageUserInfo.id);\r\n    const state = useSelector(state => state.wallReducer);\r\n    const dispatch = useDispatch()\r\n\r\n\r\n    useEffect(() => {\r\n\r\n\r\n        // axios.get(`http://127.0.0.1:3005/getMessages?from_id=${41}&to_id=${42}`)\r\n        // .then(res => console.log(res))\r\n            // axios.get(`http://127.0.0.1:3005/get`)\r\n\r\n\r\n\r\n\r\n        if (isAuthorized) {\r\n        dispatch(getUserPostsThunkCreator(ownerId));\r\n        }\r\n    }, [JSON.stringify(state.userPosts), isAuthorized])\r\n\r\n\r\n        function typeTextArea (e) {\r\n            return dispatch(typeOnWallTextArea(e.target.value))\r\n        }\r\n\r\n    const posts = state.userPosts\r\n            .map((item, i) =>\r\n                <Post\r\n                    homeLander={true} \r\n                    fromName={item.name}\r\n                    fromId={item.from_id}\r\n                    ownerId={ownerId}\r\n                    message={state.textAreaState}\r\n                    postId={item.id}\r\n                    key={crypto.randomUUID()}\r\n                    likes={item.likes}\r\n                    text={item.message}\r\n                    index={i}\r\n                    dispatch={dispatch}\r\n                    sent={item.updated}\r\n                />)\r\n\r\n    return (\r\n        <>\r\n            {isAuthorized ?\r\n                <>\r\n                    <UserProfileInfo />\r\n                    <Wall state={state} typeTextArea={typeTextArea} ownerId={ownerId} posts={posts} userId={userId} dispatch={dispatch} usersAPI={usersAPI}/>\r\n\r\n                </>\r\n                :\r\n                isAuthorized == null ?\r\n                null\r\n                :\r\n                <div className={w.not__autorized_block}>\r\n                    <img className={w.image} src={authorizedSamPicture} alt=\"Unauthorezid Sam\" />\r\n                    <p>You are not authorized.</p>\r\n                </div>\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default WallContainer;","import React, { useEffect } from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport m from './Messages.module.css';\r\n\r\n\r\nconst Contact = (props) => {\r\n    let { id, name, unreadCounter } = props;\r\n\r\n\r\n    const setClass = ({ isActive }) => isActive ? `${m.active} ${m.item}` : m.item;\r\n\r\n    return <>\r\n\r\n        <NavLink\r\n            key={crypto.randomUUID()}\r\n            to={`/messages/${id}`}\r\n            className={setClass}>\r\n            {name}\r\n            {unreadCounter > 0 && <span className={m.unreadMessages}>{unreadCounter}</span>}\r\n        </NavLink>\r\n\r\n    </>\r\n}\r\n\r\nexport default Contact;","import React, { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { usersAPI } from \"../../DAL/api\";\r\nimport Contact from \"./Contact\";\r\nimport m from './Messages.module.css';\r\n\r\nconst ContactsWindow = (props) => {\r\n    const dispatch = useDispatch();\r\n    const ownerId = useSelector(state => state.authReducer.id);\r\n\r\n    useEffect(() => {\r\n    //     axios.post('http://127.0.0.1:3005/messages/post', {\r\n                  \r\n    //         from_id: 50, \r\n    //         to_id: 39,\r\n    //         message: `${new Date()}` \r\n          \r\n    // }).then(res => console.log(res))\r\n\r\n        usersAPI.getDialogContacts(ownerId)\r\n        .then(res => { \r\n            console.log(res);\r\n            if (res.data !== 'Empty array') {\r\n            let arr = [...res.data];\r\n            arr.map(el => {\r\n                if (el.contragent_id == ownerId) el.contragent_id = el.from_id;\r\n                \r\n                return el;\r\n            });\r\n            \r\n            dispatch({type:'SET_CONTACTS', arr: arr })\r\n        }\r\n        })\r\n\r\n    }, [ownerId])\r\n    let contacts = props.state.contactsData\r\n        .map(item =>\r\n            <Contact\r\n                dispatch={props.dispatch}\r\n                key={crypto.randomUUID()}\r\n                id={item.id} \r\n                name={item.name}\r\n                unreadCounter={item.unreadCounter}\r\n            />\r\n        );\r\n    return <>\r\n        <div className={m.contacts}>\r\n            <ul className={m.items_list}>\r\n                {contacts}\r\n            </ul>\r\n        </div>\r\n    </>\r\n}\r\n\r\nexport default ContactsWindow;","import React from \"react\";\r\nimport m from './Messages.module.css';\r\n\r\nconst Msg = (props) => {\r\n    let { text, name, answer, sent } = props;\r\n\r\n   \r\n    let time = new Date(+sent);\r\n    sent = time.toLocaleTimeString();\r\n\r\n\r\n    const displayMessage = () => {\r\n        if (answer) {\r\n            return <>\r\n                <div className={`${m.content} ${m.answer}`}>\r\n                    <div className={m.person}>\r\n                        <div className={m.ava}><img src=\"https://cdn1.iconfinder.com/data/icons/user-pictures/100/male3-32.png\" alt=\"\" /></div>\r\n                        <div className={m.name}>Me</div>\r\n                    </div>\r\n                    <div className={m.message}><span>{sent}</span>{text}</div>\r\n                </div>\r\n            </>\r\n        }\r\n        if (!answer) {\r\n            return <>\r\n                <div className={m.content}>\r\n                    <div className={m.person}>\r\n                        <div className={m.ava}><img src=\"https://cdn1.iconfinder.com/data/icons/user-pictures/100/male3-32.png\" alt=\"\" /></div>\r\n                        <div className={m.name}>{name}</div>\r\n                    </div>\r\n                    <div className={m.message}><span>{sent}</span>{text}</div>\r\n                </div>\r\n            </>\r\n        }\r\n    }\r\n\r\n    return <>\r\n\r\n        {displayMessage()}\r\n\r\n    </>\r\n}\r\n\r\nexport default Msg;","import React, { useEffect } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport m from './Messages.module.css';\r\nimport Msg from \"./Msg\";\r\nimport ScrollToBottom from 'react-scroll-to-bottom';\r\nimport { sendMessage, setConversationId, typeOnPrimaryMsgTextArea } from \"../../redux/message-reducer\";\r\nimport { useSelector } from \"react-redux\";\r\nimport axios from \"axios\";\r\nimport { usersAPI } from \"../../DAL/api\";\r\n\r\nconst DialogWindow = ({ state, dispatch }) => {\r\n\r\n    let ownerId = useSelector(state => state.authReducer.id);\r\n    let msgStateLength = useSelector(state => state.messageReducer.contactsMsg.length);\r\n    let params = useParams();\r\n\r\n    const sendMsg = (ownerId, to_id) => {\r\n        let msg = state.contactsData.filter(el => el.id == to_id)[0].currentMessageText;\r\n        console.log(msg);\r\n        if (msg) {\r\n            axios.post('http://127.0.0.1:3005/messages/post', {\r\n\r\n                from_id: ownerId,\r\n                to_id: to_id,\r\n                message: msg\r\n\r\n            }).then(res => console.log(res))\r\n            dispatch(sendMessage())\r\n        }\r\n    }\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        if (params['*']) {\r\n\r\n            usersAPI.getDialogMessages(ownerId, params['*']).then(res => {\r\n                console.log(`dialogs >>> `, res);\r\n                dispatch({type:'SET_USER_MESSAGES', payload: res.data, ownerId})\r\n            })\r\n        }\r\n        console.log(params['*']);\r\n        dispatch(setConversationId(params['*']));\r\n        dispatch({ type: 'SET_TO_NULL_UNREAD_COUNTER', userId: params['*'] })\r\n\r\n    }, [params['*'], msgStateLength])\r\n\r\n\r\n    function displayFirstScreen() {\r\n        if (params['*']) {\r\n            return <>\r\n                <textarea placeholder=\"Type your message here...\" onChange={(e) => dispatch(typeOnPrimaryMsgTextArea(e.target.value))} value={state.contactsData[state.currentConversationIndex].currentMessageText} onKeyDown={(e) => (e.key === 'Enter' && e.ctrlKey) ? sendMsg(ownerId, params['*']) : ''} />\r\n                <button className={m.button} onClick={() => sendMsg(ownerId, params['*'])}>Send</button>\r\n            </>\r\n        }\r\n        else return <>\r\n            <div>\r\n                <p>\r\n                      !\r\n                </p>\r\n            </div>\r\n        </>\r\n    }\r\n\r\n\r\n    let messages = Object.assign([], state.contactsMsg)\r\n        .filter((el) => el.conversation == state.activeDialogId)\r\n        .map(el => {\r\n            return <Msg\r\n                key={crypto.randomUUID()}\r\n                text={el.text}\r\n                conversation={el.conversation}\r\n                name={el.name}\r\n                answer={el.answer}\r\n                sent={el.sent}\r\n            />\r\n        })\r\n\r\n\r\n    return <>\r\n        <div className={m.screen}>\r\n\r\n            <ScrollToBottom className={m.dialogContainer}>\r\n                {messages}\r\n            </ScrollToBottom>\r\n\r\n            <div className={m.area}>\r\n                {displayFirstScreen()}\r\n            </div>\r\n        </div>\r\n    </>\r\n}\r\n\r\nexport default DialogWindow;","import React, { useReducer } from \"react\";\r\nimport ContactsWindow from \"./ContactsWindow\";\r\nimport DialogWindow from \"./DialogWindow\";\r\nimport m from './Messages.module.css';\r\nimport { useSelector, useDispatch } from 'react-redux'\r\n\r\nconst Messages = () => {\r\n\r\n\r\n\r\nlet state = useSelector(state => state.messageReducer)\r\nlet dispatch = useDispatch();\r\n\r\n\r\nreturn <>\r\n        <div className={m.title}>\r\n            <h2>Messages</h2>\r\n        </div>\r\n        <div className={m.container}>\r\n                <ContactsWindow state={state} dispatch={dispatch} />\r\n                <DialogWindow state={state} dispatch={dispatch} />\r\n\r\n        </div>\r\n    </>\r\n}\r\n\r\nexport default Messages;","import { usersAPI } from '../DAL/api';\r\n\r\n\r\n\r\n\r\nlet _usersState = {\r\n    isFetching: false,\r\n    currentUsersPage: 1,\r\n    usersPerList: 5,\r\n    totalUsersCount: 0,\r\n    totalPages: 0,\r\n    users: [],\r\n    userFriendlist: [],\r\n    currentProfilePageUserInfo: {\r\n        profilePic: '',\r\n        status: '',\r\n        fullName: '',\r\n        info: {},\r\n        contacts: {},\r\n        photo: '',\r\n        aboutMe: '',\r\n        id:'',\r\n        userWallPosts: [],\r\n    },\r\n\r\n    \r\n}\r\n\r\nexport function usersReducer(state = _usersState, action) {\r\n\r\n    switch (action.type) {\r\n\r\n        case 'SET_CURRENT_USER_WALL_POSTS' : {\r\n            let CPPUIcopy = {...state.currentProfilePageUserInfo};\r\n            CPPUIcopy.userWallPosts = action.posts;\r\n            CPPUIcopy.userWallPosts = CPPUIcopy.userWallPosts.map(el => {\r\n                el.likes = JSON.parse(el.likes)\r\n                return el;\r\n            })\r\n            return {\r\n                ...state,\r\n                currentProfilePageUserInfo : CPPUIcopy\r\n\r\n            }\r\n        }\r\n        case 'REMOVE_USER_DATA': {\r\n        }\r\n        case 'SET_USER_FRIENDLIST': {\r\n            return {\r\n                ...state,\r\n                userFriendlist: action.friendList\r\n            }\r\n        }\r\n\r\n        case 'ADD_REMOVE_USER': {\r\n            let usersCopy = [...state.users];\r\n            usersCopy[action.i].followed = !usersCopy[action.i].followed;\r\n            return {\r\n                ...state,\r\n                users: usersCopy,\r\n            }\r\n        }\r\n\r\n        case 'SET_CURRENT_PROFILE_DATA': {\r\n            let currentUserProfileCopy = {...state.currentProfilePageUserInfo};\r\n                currentUserProfileCopy.fullName = action.fullName || currentUserProfileCopy.fullName;\r\n                currentUserProfileCopy.info = JSON.parse(action.info) || currentUserProfileCopy.info;\r\n                currentUserProfileCopy.photo = action.photo || currentUserProfileCopy.photo;\r\n                currentUserProfileCopy.status = action.status || currentUserProfileCopy.status;\r\n                currentUserProfileCopy.profilePic = action.profilePic || currentUserProfileCopy.profilePic;\r\n\r\n            return {\r\n                ...state,\r\n                currentProfilePageUserInfo: currentUserProfileCopy\r\n            }\r\n        }\r\n\r\n        case 'SET_PAGINATION_PAGE': {\r\n            return {\r\n                ...state,\r\n                currentUsersPage: action.page,\r\n                users: action.users,\r\n            }\r\n        }\r\n\r\n        case 'SET_CURRENT_PROFILE_PAGE_USER_ID' : {\r\n            let currentUserProfileCopy = {...state.currentProfilePageUserInfo}\r\n            currentUserProfileCopy.id = action.id\r\n            return {\r\n                ...state,\r\n                currentProfilePageUserInfo: currentUserProfileCopy,\r\n            }\r\n        }\r\n\r\n        case 'SET_USERS': {\r\n            let totalPagesCopy = Math.ceil((action.totalUsersCount|| state.totalUsersCount) / state.usersPerList);\r\n            return {\r\n                ...state,\r\n                users: [...action.users],\r\n                totalUsersCount: action.totalUsersCount || state.totalUsersCount,\r\n                totalPages: totalPagesCopy,\r\n                currentUsersPage: action.page || state.currentUsersPage\r\n            }\r\n\r\n        }\r\n\r\n        case 'LOAD_MORE_USERS': {\r\n            let currentUsersPageCopy = state.currentProfilePageUserInfo;\r\n            currentUsersPageCopy += 1;\r\n            return {\r\n                ...state,\r\n                currentProfilePageUserInfo: currentUsersPageCopy,\r\n                users: [...state.users, ...action.users]\r\n            }\r\n        }\r\n\r\n        default: return state\r\n    }\r\n\r\n}\r\n\r\n\r\nexport const getUserListThunkCreator = (token, id) => {\r\n\r\n    return (dispatch, getState) => {\r\n        usersAPI.getUsers(token, getState().usersReducer.currentUsersPage, getState().usersReducer.usersPerList, id)\r\n        .then(res => {\r\n            dispatch({ type: 'SET_USERS', users: res.data.users, totalUsersCount: res.data.totalUsers, })\r\n            dispatch({ type: 'SET_USER_FRIENDLIST', friendList: res.data.friends })\r\n        })\r\n    }\r\n}\r\n\r\n","\r\nlet _authState = {\r\n    id: null,\r\n    authorized: null,\r\n    errorMessage: null,\r\n    userData : {\r\n        name: '',\r\n        email: '',\r\n        info: {\r\n            age: '',\r\n            gender: '',\r\n            city: '',\r\n        },\r\n        photo: '',\r\n        status: '',\r\n        profilePic: '',\r\n     }\r\n}\r\n\r\n    export const authReducer = (state = _authState, action) => {\r\n\r\n        switch (action.type) {\r\n\r\n            case 'USER_STATUS_TEXT_HANDLER' : {\r\n                return {\r\n                    ...state, \r\n                    userData: {...state.userData, status: action.statusText}\r\n                }\r\n            }\r\n\r\n            case 'USER_NAME_SETTINGS_HANDLER' : {\r\n                return {\r\n                    ...state,\r\n                    userData: {...state.userData, name: action.name} \r\n                }\r\n            }\r\n\r\n            case 'USER_EMAIL_SETTINGS_HANDLER' : {\r\n                return {\r\n                    ...state,\r\n                    userData: {...state.userData, email: action.email} \r\n                }\r\n            }\r\n\r\n            case 'USER_PHOTO_SETTINGS_HANDLER' : {\r\n                console.log(`photo >>> `,action);\r\n                return {\r\n                    ...state,\r\n                    userData: {...state.userData, photo: action.photo} \r\n                }\r\n            }\r\n\r\n            case 'USER_PROFILE_PIC_HANDLER' : {\r\n                console.log(`profilePic >>> `,action);\r\n                return {\r\n                    ...state,\r\n                    userData: {...state.userData, profilePic: action.profilePic} \r\n                }\r\n            }\r\n\r\n            case 'USER_GENDER_SETTINGS_HANDLER' : {\r\n                return {\r\n                    ...state,\r\n                    userData: {...state.userData, info: {...state.userData.info, gender: action.gender}} \r\n                }\r\n            }\r\n            case 'USER_AGE_SETTINGS_HANDLER' : {\r\n                return {\r\n                    ...state,\r\n                    userData: {...state.userData, info: {...state.userData.info, age: action.age}} \r\n                }\r\n            }\r\n            case 'USER_CITY_SETTINGS_HANDLER' : {\r\n                return {\r\n                    ...state,\r\n                    userData: {...state.userData, info: {...state.userData.info, city: action.city}} \r\n                }\r\n            }\r\n\r\n            case 'SET_USER_INFO_AFTER_LOGIN' : {\r\n                console.log(action.userData);\r\n                let userDataCopy = {...action.userData};\r\n                if (userDataCopy.info) userDataCopy.info = JSON.parse(userDataCopy.info);\r\n                else userDataCopy.info = { age: '', gender: '', city: ''};\r\n                console.log(`userDataCopy >> `, action.userData);\r\n                return {\r\n                    ...state,\r\n                    authorized: true,\r\n                    userData : {...userDataCopy},\r\n                    id: action.id\r\n\r\n                }\r\n            }\r\n\r\n            case 'SET_AUTHORIZED' : {\r\n                return {\r\n                    ...state,\r\n                    authorized: action.authorized,\r\n                    errorMessage: action.errorMessage\r\n                                    }\r\n            }\r\n\r\n            case 'SET_LOGIN' : {\r\n                return {\r\n                    ...state,\r\n                    login: action.login\r\n                }\r\n            }\r\n\r\n            case 'SET_PASS' : {\r\n                return {\r\n                    ...state,\r\n                    pass: action.pass\r\n                }\r\n            }\r\n\r\n            default : return state\r\n        }\r\n    }","import { messageReducer } from './message-reducer';\r\nimport { wallReducer } from './wall-reducer';\r\nimport { usersReducer } from './users-reducer'\r\nimport { authReducer } from './auth-reducer';\r\nimport { applyMiddleware, createStore, configureStore, combineReducers } from '@reduxjs/toolkit'\r\nimport thunk from 'redux-thunk';\r\n\r\n\r\nconst rootReducer = combineReducers({\r\n    wallReducer,\r\n    messageReducer,\r\n    usersReducer,\r\n    authReducer,\r\n})\r\n\r\nconst store = createStore(rootReducer, applyMiddleware(thunk));\r\n\r\nexport default store;\r\n\r\n","import React from 'react'\r\nimport u from './Users.module.css';\r\n\r\nfunction Users({users, loadMoreUsers, pages, userSearchValue, searchUserInputHandler}) {\r\n    \r\n    return <div className={u.container}>\r\n    <div className={u.user__search_block}>\r\n        <label htmlFor=\"user_search-input\" >Find user:</label>\r\n        <input onChange={searchUserInputHandler} type=\"text\" className={u.user_search__input} id='user_search-form' placeholder='Enter username...' value={userSearchValue} />\r\n    </div>\r\n            {users}\r\n            <div>\r\n                <button onClick={loadMoreUsers} className={`${u.button} ${u.remove}`}>Load more...</button>\r\n            </div>\r\n            <div>{pages}</div>\r\n            </div>\r\n}\r\nexport default Users","import React, { useState } from 'react'\r\nimport u from './Users.module.css';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\n\r\nfunction UserProfileBlock({ name, photo, id, dispatch, followUser, unfollowUser, userId, follow, setActive}) {\r\nconst [upd, setUpd] = useState(follow)\r\n\r\n\r\nconst setId = (id) => dispatch({type:'SET_CURRENT_PROFILE_PAGE_USER_ID', id});\r\n\r\n    return <div key={crypto.randomUUID()} className={u.user_profile}>\r\n  \r\n\r\n                <div className={u.right_side}>\r\n                    <div className={u.user_avatar}>\r\n                    <NavLink onClick={setId} to={`/user/${id}`}> <img className={u.user_avatar} src={photo || 'https://cdn4.iconfinder.com/data/icons/avatars-xmas-giveaway/128/indian_man_male_person-256.png'} height=\"36px\" alt={`ava_${name}`} /> </NavLink>\r\n                    </div>\r\n                    <div className={u.user_name}>\r\n                    <NavLink className={u.user_link} onClick={setId} to={`/user/${id}`}> {name} </NavLink>\r\n                    </div>\r\n                </div>\r\n                <div className={u.left_side}>\r\n                <button className={`${u.button} ${u.send__message}`} onClick={() =>  setActive(id, name, photo || 'https://cdn4.iconfinder.com/data/icons/avatars-xmas-giveaway/128/indian_man_male_person-256.png')}>Send message</button>\r\n                    <button onClick={() => {\r\n                    upd ? unfollowUser(userId,id) : followUser(userId,id);\r\n                    setUpd(!upd);\r\n                     }}\r\n                      className={`${u.button} ${upd ? u.add : u.remove}`}>{upd ? 'Remove from friends' : 'Add to friends'}</button>\r\n                </div>\r\n            </div>\r\n           \r\n}\r\n\r\nexport default UserProfileBlock;\r\n\r\n","import React from 'react'\r\nimport './Preloader.css'\r\n\r\n\r\n\r\n function Preloader() {\r\n    \r\n\r\n    return (\r\n    <>\r\n       <PreloaderBlock key={1} />\r\n       <PreloaderBlock key={2}/>\r\n       <PreloaderBlock key={3}/>\r\n       </>\r\n    )\r\n}\r\n\r\nfunction PreloaderBlock () {\r\n    return (\r\n        <div className=\"user_profile\">\r\n        <div className=\"right_side\">\r\n            <div className=\"user_avatar\">\r\n            <div className=\"circle\" />\r\n            </div>\r\n            <div className=\"user_name\">\r\n            <div className=\"short_line\" />\r\n            </div>\r\n        </div>\r\n        <div className=\"left_side\">\r\n        <div className=\"long_line\" />\r\n        <div className=\"long_line\" />\r\n        <div className=\"long_line\" />\r\n        </div>\r\n    </div>\r\n    )\r\n}\r\n\r\nexport default Preloader;\r\n\r\n","export const generatePagination = (curPage, totalPages) => {\r\n\r\n    let res = [];\r\n\r\n    if (totalPages < 7) {\r\n      for (let i = 1; i <= totalPages; i++) {\r\n        res.push(i)\r\n      }\r\n    }\r\n    else {\r\n      if (curPage <= 3) {\r\n        for (let i = 1; i <= 7; i++) {\r\n          res.push(i);\r\n        }\r\n      }\r\n      else if (curPage >= totalPages - 3) {\r\n        for (let i = curPage - (6 - (totalPages - curPage)); i <= totalPages; i++) {\r\n          res.push(i);\r\n        }\r\n      }\r\n\r\n      else if (curPage > 3) {\r\n        for (let i = curPage - 3; i < curPage + 4; i++) {\r\n          res.push(i);\r\n        }\r\n      }\r\n    }\r\n\r\n    return res\r\n}\r\n","import React, { Children } from 'react'\r\nimport u from '../Users/Users.module.css';\r\n\r\n\r\n\r\nfunction UsersModal({setActive, isActive, children}) {\r\n    console.log(isActive);\r\n    function setActiveHandler() {\r\n        setActive(false);\r\n    }\r\n\r\n\r\n    return (\r\n        <>\r\n            <div className={isActive ? `${u.modal__block} ${u.active}` : u.modal__block} onClick={setActiveHandler}>\r\n                <div className={u.modal__block_content} onClick={(e) => e.stopPropagation()}>\r\n                    {children}\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default UsersModal; ","import React, { useState, useEffect } from 'react'\r\nimport u from './Users.module.css';\r\nimport UsersModal from '../Modals/UsersModal';\r\nimport { Link } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\nimport axios from 'axios';\r\n\r\n\r\nexport default function ModalNewMessage({ modalData, setModalActive, isActive }) {\r\n\r\n    const [textareaInput, setTextareaInput] = useState('');\r\n    const [isSent, setSent] = useState(false);\r\n    let ownerId = useSelector(state => state.authReducer.id);\r\n\r\n    useEffect(() => {\r\n        if (isSent) {\r\n            setTimeout(() => {\r\n                setModalActive(false);\r\n                setTimeout(() => {\r\n                    setSent(!isSent);\r\n                }, 300);\r\n            }, 700);\r\n        }\r\n    }, [isSent])\r\n\r\n    const sendMsg = (ownerId, to_id) => {\r\n\r\n        if (textareaInput) {\r\n            axios.post('http://127.0.0.1:3005/messages/post', {\r\n\r\n                from_id: ownerId,\r\n                to_id: to_id,\r\n                message: textareaInput\r\n\r\n            })\r\n                .then(() => {\r\n                    setTextareaInput('');\r\n                    setSent(true);\r\n                })\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <UsersModal isActive={isActive} setActive={setModalActive}>\r\n                {isSent ?\r\n                    <>\r\n                        <p className={u.modal__block_newMessage}>Message sent!</p>\r\n                    </>\r\n                    :\r\n                    <><p className={u.modal__block_newMessage}>New message:</p>\r\n                        <div className={u.modal__block_middle}>\r\n                            <div className={u.modal__block_userData}>\r\n                                <img className={u.user_avatar} src={modalData.photo || 'https://cdn4.iconfinder.com/data/icons/avatars-xmas-giveaway/128/indian_man_male_person-256.png'} height='36px' alt={modalData.name} srcset=\"\" />\r\n                                <Link to={`/user/${modalData.id}`}>{modalData.name}</Link>\r\n                            </div>\r\n                            <textarea className={u.modal__block_textarea} cols=\"30\" rows=\"20\" onChange={(e) => setTextareaInput(e.target.value)} value={textareaInput} />\r\n                        </div>\r\n                        <button className={`${u.button} ${u.remove} ${u.modal__block_button}`} onClick={() => sendMsg(ownerId, modalData.id)}>Send</button>\r\n                    </>}\r\n            </UsersModal>\r\n        </>\r\n    )\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport Users from './Users'\r\nimport u from './Users.module.css';\r\nimport UserProfileBlock from './User-profile-block'\r\nimport Preloader from '../Preloader/Preloader'\r\nimport { usersAPI } from '../../DAL/api';\r\nimport Cookies from 'universal-cookie';\r\nimport { generatePagination } from './generatePagination';\r\nimport { getUserListThunkCreator } from '../../redux/users-reducer';\r\nimport ModalNewMessage from './ModalNewMessage';\r\n\r\nfunction UsersContainer() {\r\n    const [subscribe, setSubscribe] = useState(false);\r\n    const [isFetching, setFetching] = useState(true);\r\n    const [userSearchValue, serUserSearchValue] = useState('');\r\n    const [isModalActive, setModalActive] = useState(false);\r\n    const [modalData, setModalData] = useState({})\r\n\r\n    const state = useSelector(state => state.usersReducer)\r\n    const dispatch = useDispatch();\r\n    let id = useSelector(state => state.authReducer.id);\r\n    let isAuthorized = useSelector(state => state.authReducer.authorized);\r\n    const cookie = new Cookies();\r\n    const token = cookie.get('cookie localhost')\r\n\r\n    useEffect(() => {\r\n\r\n\r\n        if (isAuthorized || !id) {\r\n            dispatch(getUserListThunkCreator(token, id))\r\n            setFetching(false)\r\n        }\r\n    }, [isAuthorized])\r\n\r\n\r\n    function sendMessageModalHandler (id, name, photo) {\r\n        setModalActive(true);\r\n        setModalData(data => data = {id, name, photo})\r\n        console.log(modalData);\r\n    }\r\n\r\n\r\n    function loadMoreUsers() {\r\n        setFetching(true)\r\n        usersAPI.getUsers(token, state.currentUsersPage + 1, state.usersPerList).then(res => {\r\n            dispatch({\r\n                type: 'LOAD_MORE_USERS',\r\n                users: [...res.data.users],\r\n            })\r\n        })\r\n            .then(() => {\r\n                setFetching(false)\r\n            })\r\n    }\r\n\r\n    function setPagination(page) {\r\n\r\n        if (!userSearchValue) {\r\n            setFetching(true);\r\n            usersAPI.getUsers(token, page, state.usersPerList, id)\r\n                .then(res => {\r\n                    console.log(`pag res >> `, res);\r\n                    dispatch({ type: 'SET_PAGINATION_PAGE', page: page, users: [...res.data.users] })\r\n                })\r\n                .then(() => {\r\n                    setFetching(false);\r\n                })\r\n        }\r\n        else {\r\n            setFetching(true)\r\n            usersAPI.getFilteredUsers(userSearchValue, page).then(res => {\r\n                console.log(res);\r\n                dispatch({ type: 'SET_USERS', page: page, users: res.data.users, totalUsersCount: res.data.totalUsers })\r\n                setFetching(false);\r\n            });\r\n        }\r\n    }\r\n\r\n    let pages = generatePagination(state.currentUsersPage, state.totalPages).map(el => {\r\n        return <> <span key={crypto.randomUUID()} onClick={() => setPagination(el)} className={`${u.elem} ${el == state.currentUsersPage ? u.active_elem : ''}`}>{el}</span></>\r\n    })\r\n\r\n\r\n    function followUser(userId, followId) {\r\n        console.log(`followUser called`);\r\n\r\n        usersAPI.postFollowUser(userId, followId).then(res => console.log(res));\r\n    }\r\n\r\n    function unfollowUser(userId, followId) {\r\n        console.log(`unfollowUser called`);\r\n\r\n        usersAPI.deleteUnfollowUser(userId, followId).then(res => console.log(res));\r\n    }\r\n\r\n\r\n\r\n    function searchUserInputHandler(e) {\r\n        serUserSearchValue(e.target.value)\r\n        usersAPI.getFilteredUsers(e.target.value).then(res => {\r\n            dispatch({ type: 'SET_USERS', users: res.data.users, totalUsersCount: res.data.totalUsers, page: 1 })\r\n        });\r\n    }\r\n\r\n    // console.log(`RERENDER?`);\r\n    let users = state.users\r\n        .map((el) => {\r\n            // console.log(state.userFriendlist);\r\n            let followed = state.userFriendlist ? state.userFriendlist.map(el => el.id).includes(el.id) : false;\r\n            return <>\r\n                <UserProfileBlock key={crypto.randomUUID()} setActive={sendMessageModalHandler} subscribe={subscribe} setSubscribe={setSubscribe} follow={followed} unfollowUser={unfollowUser} followUser={followUser} photo={el.photo} userId={id} name={el.name} id={el.id} dispatch={dispatch} />\r\n            </>\r\n\r\n        })\r\n\r\n    return <div>\r\n        <h1>USERS LIST</h1>\r\n\r\n        \r\n            <ModalNewMessage isActive={isModalActive} modalData={modalData} setModalActive={setModalActive} />\r\n\r\n        {isAuthorized ?\r\n            isFetching ? <Preloader /> : <Users userSearchValue={userSearchValue} searchUserInputHandler={searchUserInputHandler} users={users} loadMoreUsers={loadMoreUsers} pages={pages} />\r\n            :\r\n            null\r\n        }\r\n\r\n    </div>\r\n}\r\n\r\nexport default UsersContainer;\r\n\r\n","import React, { useState, useEffect } from 'react'\r\nimport ph from './Profile-head.module.css';\r\n\r\n\r\nfunction UserProfilePage({ setActive, profilePic, status, photo, fullName, contacts, aboutMe, isFriend, ownerId, userId, followUser, unfollowUser }) {\r\n  const [upd, setUpd] = useState(false);\r\n  useEffect(() => {\r\n    setUpd(isFriend);\r\n  }, [isFriend])\r\n  console.log(`render`, upd, isFriend);\r\n  return (\r\n    <>\r\n      <div className={ph.profile__pic}>\r\n        <img src={profilePic || \"https://cdn.huckletree.com/web-uploads/2018/10/23094022/OS-Blog-Header-32.png\"} alt=\"\" srcset=\"\" />\r\n      </div>\r\n      <div className={ph.profile_info}>\r\n        <div className={ph.avatar}>\r\n          <img src={photo || 'https://cdn4.iconfinder.com/data/icons/avatars-xmas-giveaway/128/indian_man_male_person-256.png'} alt=\"ava\" height=\"80\" />\r\n          <button \r\n          className={`${ph.button} ${ph.send_message}`}\r\n          onClick={() => {\r\n            setActive(userId, fullName, photo)\r\n          }}>\r\n          Send Message\r\n          </button>\r\n\r\n          <button \r\n          className={upd ? \r\n          `${ph.button} ${ph.remove_friend}` \r\n          : \r\n          `${ph.button} ${ph.add_friend}`} \r\n          onClick={() => \r\n          {\r\n            upd ? unfollowUser(ownerId, userId) : followUser(ownerId, userId);\r\n            setUpd(!upd)\r\n          }}>\r\n          {upd ? 'Remove from friend' : 'Add to friend'}\r\n          </button>\r\n\r\n        </div>\r\n\r\n        <div className={ph.profile_text}>\r\n          <h2 className={ph.name}>{fullName}</h2>\r\n          <p>Status: {status}</p>\r\n          <div className={ph.profile_content}>\r\n            <p>Age: {aboutMe.age}</p>\r\n            <p>Gender: {aboutMe.gender}</p>\r\n            <p>FB: {contacts.facebook}</p>\r\n            <p>VK: {contacts.vk}</p>\r\n            <p>Twitter: {contacts.twitter}</p>\r\n            <p>GitHub: {contacts.github}</p>\r\n            <p>City: {aboutMe.city}</p>\r\n            <p>Edu: High grade</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default UserProfilePage\r\n\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport UserProfilePage from './UserProfilePage';\r\nimport { useParams } from 'react-router-dom';\r\nimport { usersAPI } from '../../DAL/api';\r\nimport Wall from '../Posts/Wall';\r\nimport Post from '../Posts/post';\r\nimport { typeOnWallTextArea } from '../../redux/wall-reducer';\r\nimport { getUserPostsThunkCreator } from '../../redux/wall-reducer';\r\nimport { getUserListThunkCreator } from '../../redux/users-reducer';\r\nimport Cookies from 'universal-cookie';\r\nimport ModalNewMessage from '../Users/ModalNewMessage';\r\n\r\nfunction UserProfilePageContainer() {\r\n\r\n    const [isModalActive, setModalActive] = useState(false);\r\n    const [modalData, setModalData] = useState({})\r\n\r\n    let userProfileData = useSelector(state => state.usersReducer.currentProfilePageUserInfo);\r\n    let userReducerState = useSelector(state => state.usersReducer);\r\n    let wallReducerState = useSelector(state => state.wallReducer);\r\n    let ownerId = useSelector(state => state.authReducer.id)\r\n    let cookie = new Cookies();\r\n    let token = cookie.get('cookie localhost');\r\n    let dispatch = useDispatch();\r\n    let param = useParams();\r\n\r\n    let followed = false;\r\n    userReducerState.userFriendlist && userReducerState.userFriendlist.forEach(el =>  followed = el.id == param.userId ? true : false)\r\n\r\n    useEffect(() => {\r\n        dispatch(getUserListThunkCreator(token, ownerId))\r\n\r\n        usersAPI.getCurrentUser(param.userId)\r\n            .then(res => {\r\n                dispatch({\r\n                    type: 'SET_CURRENT_PROFILE_DATA',\r\n                    fullName: res.data.name,\r\n                    info: res.data.info,\r\n                    photo: res.data.photo,\r\n                    status: res.data.status,\r\n                    profilePic: res.data.profile_background,\r\n                })\r\n                dispatch(getUserPostsThunkCreator(param.userId))\r\n            })\r\n    }, [param.userId, wallReducerState.userPosts.length, followed])\r\n\r\n\r\n    function typeTextArea(e) {\r\n        return dispatch(typeOnWallTextArea(e.target.value))\r\n    }\r\n\r\n    function followUser(userId, followId) {\r\n        console.log(`followUser called`);\r\n\r\n        usersAPI.postFollowUser(userId, followId).then(() => dispatch(getUserListThunkCreator(token, ownerId)));\r\n    }\r\n\r\n    function unfollowUser(userId, followId) {\r\n        console.log(`unfollowUser called`);\r\n\r\n        usersAPI.deleteUnfollowUser(userId, followId).then(() => dispatch(getUserListThunkCreator(token, ownerId)));\r\n    }\r\n\r\n    function sendMessageModalHandler (id, name, photo) {\r\n        setModalActive(true);\r\n        setModalData(data => data = {id, name, photo})\r\n    }\r\n\r\n    const posts = wallReducerState.userPosts.map((item, i) =>\r\n        <Post\r\n            homeLander={false}\r\n            fromName={item.name}\r\n            fromId={item.from_id}\r\n            ownerId={ownerId}\r\n            message={wallReducerState.textAreaState}\r\n            postId={item.id}\r\n            key={crypto.randomUUID()}\r\n            likes={item.likes}\r\n            text={item.message}\r\n            index={i}\r\n            dispatch={dispatch}\r\n            sent={item.updated}\r\n        />)\r\n\r\n    return (\r\n        <>\r\n        \r\n        <ModalNewMessage isActive={isModalActive} modalData={modalData} setModalActive={setModalActive} />\r\n\r\n            <UserProfilePage setActive={sendMessageModalHandler} ownerId={+ownerId} userId={+param.userId} followUser={followUser} unfollowUser={unfollowUser} isFriend={followed} status={userProfileData.status}  profilePic={userProfileData.profilePic} photo={userProfileData.photo} fullName={userProfileData.fullName} contacts={{ facebook: 'fb' }} aboutMe={userProfileData.info} />\r\n            <Wall typeTextArea={typeTextArea} ownerId={ownerId} userId={param.userId} posts={posts} dispatch={dispatch} usersAPI={usersAPI} state={wallReducerState} />\r\n        </>\r\n    )\r\n}\r\n\r\nexport default UserProfilePageContainer;","import React, { useState } from 'react'\r\nimport h from '../Header/Header.module.css'\r\n\r\n function Register({registerUser}) {\r\n    \r\n    let [login, setLogin] = useState('');\r\n    let [pass, setPass] = useState('');\r\n    let [email, setEmail] = useState('');\r\n\r\n    return (\r\n        <>\r\n            <div className={h.register__block}>\r\n                <form action=\"submit\" onSubmit={(e) => {\r\n                        e.preventDefault();\r\n                        registerUser(login, pass, email)\r\n                    }}>\r\n                <label htmlFor=\"email\">Email:</label>\r\n                    <input type=\"text\" id='email' onChange={(e)=> setEmail(e.target.value)} value={email} />\r\n                <label htmlFor=\"login\">Login:</label>\r\n                    <input type=\"text\" id='login' onChange={(e)=> setLogin(e.target.value)} value={login} />\r\n                <label htmlFor=\"password\">Password:</label>\r\n                    <input type=\"text\" id='password' onChange={(e)=> setPass(e.target.value)} value={pass} />\r\n                    <button type='submit' >Register user</button>\r\n                </form>\r\n\r\n            </div>\r\n        </>\r\n    )\r\n}\r\nexport default Register;","import axios from 'axios';\r\nimport React, { useState } from 'react'\r\nimport Register from './Register';\r\n\r\n function RegisterContainer() {\r\n    \r\n    const [isSuccsessRegistration, setIsSuccsessRegistration] = useState(false);\r\n\r\nfunction registerUser (login, pass, email) {\r\n\r\n    axios.post('http://127.0.0.1:3005/users/register', {\r\n        login: login,\r\n        password: pass,\r\n        email: email\r\n    })\r\n    .then(res => {\r\n        if (res.status == 201) {\r\n            setIsSuccsessRegistration(true)\r\n        }\r\n        console.log(res.status)})\r\n}\r\n    return (\r\n        <>\r\n        {\r\n            isSuccsessRegistration ?\r\n            <div>Thanks for registration!</div>\r\n            :\r\n            <Register registerUser={registerUser} />\r\n        }\r\n        </>\r\n    )\r\n}\r\nexport default RegisterContainer;","import React, { useEffect, useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport UserProfileBlock from '../Users/User-profile-block';\r\nimport Cookies from 'universal-cookie';\r\nimport { decodeToken, isExpired } from 'react-jwt';\r\nimport { usersAPI } from '../../DAL/api';\r\nimport Users from '../Users/Users';\r\nimport { getUserListThunkCreator } from '../../redux/users-reducer';\r\nimport ModalNewMessage from '../Users/ModalNewMessage';\r\n\r\nfunction UserFriendsListContainer(props) {\r\n\r\n    let cookies = new Cookies();\r\n    let authorized = useSelector(state => state.authReducer.authorized);\r\n    let id = useSelector(state => state.authReducer.id);\r\n    let state = useSelector(state => state.usersReducer);\r\n    let dispatch = useDispatch();\r\n    let token = cookies.get('cookie localhost')\r\n\r\n    const [upd, setUpd] = useState(false);\r\n    const [isModalActive, setModalActive] = useState(false);\r\n    const [modalData, setModalData] = useState({})\r\n\r\n\r\n    useEffect(() => {\r\n        console.log(`rerender`);\r\n        if (!isExpired(token) || !id) {\r\n            id = decodeToken(token).id;\r\n        }\r\n        dispatch(getUserListThunkCreator(token, id))\r\n    }, [authorized, upd])\r\n\r\n\r\n    function sendMessageModalHandler (id, name, photo) {\r\n        setModalActive(true);\r\n        setModalData(data => data = {id, name, photo})\r\n        console.log(modalData);\r\n    }\r\n\r\n    function followUser(userId, followId) {\r\n        usersAPI.postFollowUser(userId, followId).then(res => console.log(res))\r\n    }\r\n\r\n    function unfollowUser(userId, followId) {\r\n        usersAPI.deleteUnfollowUser(userId, followId);\r\n    }\r\n\r\n    let friends = null;\r\n    if (state.userFriendlist) friends = state.userFriendlist.map((el, i, arr) => {\r\n\r\n        let followed = arr.map(el => el.id).includes(el.id);\r\n\r\n        return <UserProfileBlock setActive={sendMessageModalHandler} userId={id} unfollowUser={unfollowUser} followUser={followUser} follow={followed} key={el.id} name={el.name} id={el.id} photo={el.photo} upd={upd} setUpd={setUpd} dispatch={dispatch} />\r\n    })\r\n\r\n    return (<div>\r\n    \r\n        <h1>FRIENDS LIST</h1>\r\n        <ModalNewMessage isActive={isModalActive} modalData={modalData} setModalActive={setModalActive} />\r\n        <Users users={friends} />\r\n    </div>\r\n    )\r\n}\r\n\r\nexport default UserFriendsListContainer;\r\n","import React from 'react'\r\n\r\nexport default function ProfileSettings(props) {\r\n    \r\n\r\n    return (\r\n        <>\r\n          \r\n        </>\r\n    )\r\n}\r\n","import axios from 'axios';\r\nimport React, { useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport Cookies from 'universal-cookie';\r\nimport { usersAPI } from '../../DAL/api';\r\nimport ProfileSettings from './ProfileSettings';\r\nimport './ProfileSettings.css';\r\n\r\nexport default function ProfileSettingsContainer(props) {\r\n\r\n    const dispatch = useDispatch();\r\n    const ownerId = useSelector(state => state.authReducer.id);\r\n\r\n    const userData = useSelector(state => state.authReducer.userData);\r\n    const cookie = new Cookies();\r\n    const token = cookie.get('cookie localhost');\r\n\r\n\r\n    let [success, setSuccess] = useState('');\r\n\r\n    function onSubmitSettings(e) {\r\n        e.preventDefault();\r\n            usersAPI.updateProfileSettings(token, userData, ownerId).then(res => setSuccess(res.status))\r\n            }\r\n\r\n    return (\r\n        <div >\r\n         {success && <p className='success'>Successfully updated!</p>}\r\n         <div className='settings'>\r\n            <form className=\"form\" onSubmit={onSubmitSettings}>\r\n               \r\n               <div className=\"item\">\r\n                <label htmlFor=\"name\">Name: </label>\r\n                <input type=\"text\" id='name' onChange={(e) => dispatch({ type: 'USER_NAME_SETTINGS_HANDLER', name: e.target.value })} value={userData.name} required />\r\n               </div>\r\n\r\n               <div className=\"item\">\r\n\r\n                <label htmlFor=\"email\">Email: </label>\r\n                <input type=\"email\" id='email' onChange={(e) => dispatch({ type: 'USER_EMAIL_SETTINGS_HANDLER', email: e.target.value })} value={userData.email} required />\r\n                \r\n                </div>\r\n\r\n                <div className=\"item\">\r\n                \r\n                <label htmlFor=\"gender\">Gender: </label>\r\n                <select name=\"gender\" id=\"gender\" onChange={(e) => dispatch({ type: 'USER_GENDER_SETTINGS_HANDLER', gender: e.target.value })} value={userData.info.gender} >\r\n                    <option value=\"Male\">Male</option>\r\n                    <option value=\"Female\">Female</option>\r\n                </select>\r\n                </div>\r\n\r\n                <div className=\"item\">\r\n                \r\n                <label htmlFor=\"age\">Age: </label>\r\n                <input type=\"number\" id='age' onChange={(e) => dispatch({ type: 'USER_AGE_SETTINGS_HANDLER', age: e.target.value })} value={userData.info.age} />\r\n                </div>\r\n                <div className=\"item\">\r\n                <label htmlFor=\"city\">City: </label>\r\n                <input type=\"text\" id='city' onChange={(e) => dispatch({ type: 'USER_CITY_SETTINGS_HANDLER', city: e.target.value })} value={userData.info.city} />\r\n                \r\n                </div>\r\n\r\n\r\n                <button type='submit'>Save settings</button>\r\n            </form>\r\n</div>\r\n\r\n            <ProfileSettings />\r\n        </div>\r\n    )\r\n}\r\n","\nimport './App.css';\nimport React, { useEffect } from 'react';\nimport Header from './components/Header/Header';\nimport Nav from './components/Nav/Nav';\nimport WallContainer from './components/Posts/WallContainer';\nimport Messages from './components/Messages/Messages';\nimport { BrowserRouter, Routes, Route } from \"react-router-dom\";\nimport store from './redux/redux';\nimport { Provider, useSelector } from 'react-redux'\nimport Users from './components/Users/UsersContainer';\nimport UserProfilePageContainer from './components/Profile/UserProfilePageContainer';\nimport RegisterContainer from './components/Header/RegisterContainer';\nimport UserFriendsListContainer from './components/Friends/UserFriendsListContainer';\nimport ProfileSettingsContainer from './components/ProfileSettings/ProfileSettingsContainer';\n\n\nfunction App() {\n\nreturn <>\n<Provider store={store}>\n    <BrowserRouter>\n      <Header />\n      <main className=\"main\">\n        <Nav />\n        <div className=\"content\">\n          <Routes>\n            <Route path=\"/\" element={<WallContainer/>} />\n            <Route path=\"/messages/*\" element={<Messages store={store} />} />\n            <Route path=\"/users_list/*\" element={<Users />} />\n            <Route path=\"/friends/\" element={<UserFriendsListContainer />} />\n            <Route path=\"/user/:userId\" element={<UserProfilePageContainer />} />\n            <Route path=\"/register\" element={<RegisterContainer />} />\n            <Route path=\"/settings\" element={<ProfileSettingsContainer />} />\n          </Routes>\n        </div>\n      </main>\n    </BrowserRouter>\n    </Provider>\n  </>\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\n\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\n\n\n\nroot.render(\n\n    <App />\n\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Nav_nav__35eGO\",\"item_list\":\"Nav_item_list__28zSQ\",\"item\":\"Nav_item__1XmsB\",\"unreadMessages\":\"Nav_unreadMessages__1WClG\",\"active\":\"Nav_active__1fHfS\"};","import { SET_USER_MESSAGES, SET_TO_NULL_UNREAD_COUNTER, SET_CONTACTS, SEND_MESSAGE, SET_CONVERSATION_ID, TYPE_ON_PRIMARY_MESSAGE_TEXTAREA } from \"./actionTypes\";\r\n\r\n\r\nlet _messageState = {\r\n    activeDialogId: 0,\r\n    currentConversationIndex: 0,\r\n    contactsMsg: [ \r\n        { sent: 1672259715420, conversation: 1, text: 'Hello, how are u?', name: 'Alex', answer: true },\r\n        { sent: 1672259725420, conversation: 1, text: 'Lorem ipsum dolor sit amet consectetur adipisicing elit. Maiores quidem facilis facere laboriosam, minima ullam excepturi, esse eligendi quasi debitis ab iure aperiam quisquam amet iusto animi pariatur a consectetur.', name: 'Nikita' },\r\n        { sent: 1672259735420, conversation: 1, text: 'Good bye!', name: 'Alex', answer: true },\r\n        { sent: 1672259745420, conversation: 1, text: 'Good Night!!', name: 'Nikita' },\r\n        { sent: 1672259755420, conversation: 2, text: 'Hi there!1', name: 'Anthony' },\r\n        { sent: 1672259765420, conversation: 2, text: 'Hi there!2', name: 'Anthony' },\r\n        { sent: 1672259775420, conversation: 2, text: 'Hi there!3', name: 'Anthony' },\r\n        { sent: 1672259795420, conversation: 2, text: 'Hi there!3', name: 'Anthony', answer: true },\r\n        { sent: 1672259785420, conversation: 2, text: 'Hi there!4', name: 'Anthony' },\r\n        { sent: 1677084416834, conversation: 2, text: '123321', name: 'Anthony' },\r\n        { sent: 1672251545420, conversation: 2, text: 'H! How r u?', name: 'Alex', answer: true },\r\n        { sent: 1672251545430, conversation: 42, text: 'H! How r u?', name: 'Alex', answer: true },\r\n        { sent: 1672251545440, conversation: 42, text: 'H! How r u?', name: 'Alex', answer: true },\r\n        { sent: 1672251565450, conversation: 42, text: 'H! How r u?', name: 'Alex', answer: true },\r\n        { conversation: 4, text: 'Do you like my new IPhone 3Gs?', name: 'Steve Jobs', sent: 1672259755420 },\r\n        { conversation: 4, text: 'Do you like my new IPhone 3Gs?', name: 'Steve Jobs', sent: 1672259755420 },\r\n    ],\r\n    contactsData: [\r\n        { id: 1, name: 'Nikita', unreadCounter: 0, currentMessageText: '', currentMsgCount:0 },\r\n        { id: 2, name: 'Anthony', unreadCounter: 1, currentMessageText: '', currentMsgCount:0 },\r\n        { id: 3, name: 'John Deer', unreadCounter: 0, currentMessageText: '', currentMsgCount:0 },\r\n        { id: 4, name: 'Steve Jobs', unreadCounter: 3, currentMessageText: '', currentMsgCount:0 },\r\n        { id: 5, name: 'Luke Skywalker', unreadCounter: 3, currentMessageText: '', currentMsgCount:0 },\r\n    ]\r\n}\r\n\r\nexport const messageReducer = (state = _messageState, action) => {\r\n    \r\n    \r\n    switch (action.type) {\r\n\r\n\r\n        case SET_USER_MESSAGES : {\r\n\r\n            let contactsMsgPayload = [];\r\n            \r\n            let ownerId = action.ownerId;\r\n            action.payload.forEach(el => {\r\n                let answer = el.from_id == ownerId ? true : false;\r\n                let time = \r\n                contactsMsgPayload.push({text: el.message, name: el.name, sent: el.sent, answer: answer, conversation: answer ? el.contragent_id      : el.from_id})\r\n            })\r\n\r\n            console.log(contactsMsgPayload);\r\n            return {\r\n                ...state,\r\n                contactsMsg: [...contactsMsgPayload]\r\n            }\r\n        }\r\n\r\n        case SET_CONTACTS : {\r\n            let contactsDataPayload = [];\r\n            console.log(action.arr);\r\n            action.arr.forEach(el => {\r\n                \r\n                contactsDataPayload.push({id: el.contragent_id, name: el.name, unreadCounter:el.unread_counter, currentMessageText:''})\r\n            })\r\n              \r\n            console.log(`contactsDataPayload >> `, contactsDataPayload);\r\n\r\n            return {\r\n                ...state,\r\n                contactsData: [...contactsDataPayload]\r\n            }\r\n        }\r\n\r\n        case SET_CONVERSATION_ID : {\r\n\r\n     \r\n        let getIndex = global.structuredClone(state.contactsData);\r\n        getIndex = getIndex.findIndex(el => el.id == action.id);\r\n\r\n        if (getIndex == -1) getIndex = 0\r\n                        \r\n        return {\r\n                ...state,\r\n                activeDialogId: action.id,\r\n                currentConversationIndex: getIndex,\r\n\r\n            }\r\n\r\n        }\r\n\r\n        case TYPE_ON_PRIMARY_MESSAGE_TEXTAREA : {\r\n\r\n        let updCurrMsgText = [...state.contactsData];\r\n        updCurrMsgText[state.currentConversationIndex].currentMessageText = action.text;\r\n        return {\r\n            ...state,\r\n            contactsData: updCurrMsgText,\r\n        }\r\n    }\r\n\r\n        case SET_TO_NULL_UNREAD_COUNTER: {\r\n            let contactsDataCopy = global.structuredClone(state.contactsData)\r\n            contactsDataCopy = contactsDataCopy.map(el => {\r\n                if (el.id == action.userId) el.unreadCounter = 0;\r\n                return el;\r\n            })\r\n            \r\n\r\n            return {\r\n                ...state,\r\n                contactsData: contactsDataCopy\r\n            }\r\n        }\r\n\r\n        case SEND_MESSAGE : {\r\n\r\n            console.log(state);\r\n\r\n            let newMessage = {\r\n                sent: new Date().getTime(),\r\n                conversation: state.contactsData[state.currentConversationIndex].id,\r\n                text: state.contactsData[state.currentConversationIndex].currentMessageText,\r\n                name: state.contactsData[state.currentConversationIndex].name,\r\n                answer: true\r\n            }\r\n            let newMessageToPush = [...state.contactsMsg];\r\n            let nullContactCurrentMsg = [...state.contactsData];\r\n            if (nullContactCurrentMsg[state.currentConversationIndex].currentMessageText.trim()) newMessageToPush.push(newMessage);\r\n\r\n\r\n            nullContactCurrentMsg[state.currentConversationIndex].currentMessageText = '';\r\n\r\n            return {\r\n                ...state,\r\n                contactsData: nullContactCurrentMsg,\r\n                contactsMsg: newMessageToPush,\r\n\r\n            }\r\n        }\r\n\r\n        default: \r\n        return state\r\n    }\r\n}\r\n\r\nexport const sendMessage = () => {\r\n    return {type: SEND_MESSAGE}\r\n}\r\nexport const setConversationId = (id) => {\r\n    return {type: SET_CONVERSATION_ID, id: id}\r\n}\r\nexport const typeOnPrimaryMsgTextArea = (text) => {\r\n    return { type: TYPE_ON_PRIMARY_MESSAGE_TEXTAREA, text: text }\r\n}","import axios from \"axios\";\r\n\r\n\r\nexport const usersAPI = {\r\n\r\n    sendUserWallPost: (from, to, message) => {\r\n\r\n        return axios.post('http://127.0.0.1:3005/user_wall_posts', {\r\n            from: from,\r\n            to: to,\r\n            message: message\r\n        })\r\n    },\r\n\r\n    updateProfileSettings: (token, settings, ownerId) => {\r\n        const headers = {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': token\r\n        }\r\n        return axios.post('http://127.0.0.1:3005/update_user_settings', {\r\n            id: ownerId,\r\n            settings\r\n        }, {\r\n            headers\r\n        })\r\n    },\r\n    updateUsersStatus: (token, id, statusText) => {\r\n        const headers = {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': token\r\n        }\r\n        return axios.post('http://127.0.0.1:3005/update_user_status', {\r\n            id: id,\r\n            statusText: statusText\r\n        },\r\n            {\r\n                headers\r\n            })\r\n    },\r\n    updatepost: (action) => {\r\n\r\n        let body;\r\n\r\n        switch (action.type) {\r\n\r\n            case 'editPost': {\r\n                body = {\r\n                    type: action.type,\r\n                    postId: action.postId,\r\n                    message: action.message\r\n                }\r\n                break;\r\n            }\r\n\r\n            case 'updateLikes': {\r\n                body = {\r\n                    type: action.type,\r\n                    postId: action.postId,\r\n                    likes: action.likes\r\n                }\r\n                break;\r\n            }\r\n\r\n            case 'deletePost': {\r\n                body = {\r\n                    type: action.type,\r\n                    postId: action.postId\r\n                }\r\n                break;\r\n            }\r\n\r\n            default: return\r\n        }\r\n\r\n\r\n        return axios.post('http://127.0.0.1:3005/updatepost', body)\r\n    },\r\n    getCurrentUser: (id) => {\r\n        return axios.get(`http://127.0.0.1:3005/users/${id}`)\r\n    },\r\n    getUsers: (token, page, limit, id) => {\r\n\r\n        const headers = {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': token\r\n        }\r\n\r\n        return axios.get(`http://127.0.0.1:3005/users?page=${page}&limit=${limit}&id=${id}`, {\r\n            headers\r\n        })\r\n    },\r\n    getFilteredUsers: (name, page) => {\r\n\r\n        return axios.post('http://127.0.0.1:3005/filteredUsers', { name: `%${name}%`, page: page })\r\n    }\r\n    ,\r\n    getUserFriendlist: (id, token) => {\r\n        return axios.get(`http://127.0.0.1:3005/user/friends?id=${id}`, {\r\n            headers: {\r\n                Authorization: token\r\n            }\r\n        })\r\n    },\r\n    getUserPosts: (userId) => {\r\n        return axios.get(`http://127.0.0.1:3005/user_wall_posts?to=${userId}`)\r\n    },\r\n    postFollowUser: (userId, followId) => {\r\n        console.log(`add to friend called from api`, userId, followId);\r\n        return axios.post(`http://127.0.0.1:3005/follow/`, {\r\n            userId: userId,\r\n            followId: followId\r\n        })\r\n    },\r\n    deleteUnfollowUser: (userId, followId) => {\r\n\r\n        return axios.post(`http://127.0.0.1:3005/unfollow/`, {\r\n\r\n            userId: userId,\r\n            followId: followId\r\n\r\n        })\r\n    },\r\n\r\n    logout: () => {\r\n        return axios.delete(`https://social-network.samuraijs.com/api/1.0/auth/login`, {\r\n            withCredentials: true,\r\n        })\r\n    },\r\n\r\n    authentification: (token, id) => {\r\n        const headers = {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': token\r\n        }\r\n        return axios.post('http://127.0.0.1:3005/auth/me', {\r\n            id: id\r\n        }, {\r\n            headers\r\n        })\r\n    },\r\n\r\n    authorizedMe: (login, password) => {\r\n        return axios.post('http://localhost:3005/auth/login', {\r\n            login: login,\r\n            password: password\r\n        })\r\n    },\r\n\r\n    getDialogContacts: (ownerId) => {\r\n        return axios.get(`http://127.0.0.1:3005/messages/contacts?ownerId=${ownerId}`)\r\n    },\r\n\r\n    getDialogMessages: (ownerId, userId) => {\r\n        return axios.get(`http://127.0.0.1:3005/messages/get?ownerId=${ownerId}&userId=${userId}`)\r\n    },\r\n\r\n    \r\n}\r\n"],"sourceRoot":""}